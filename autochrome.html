<!DOCTYPE html>
<html><head><style>body {
  background: #000000;
  font-family: "Iosevka Term", "Fira Code", Inconsolata, Menlo, Monaco, Consolas, monospace;
  font-size: 16px;
}

a {
  text-decoration: none;
  font-weight: bolder;
}

code, pre {
  line-height: 1.24;
  font-family: "Iosevka Term", "Fira Code", Inconsolata, Menlo, Monaco, Consolas, monospace;
  word-break: normal;
  white-space: pre;
  word-spacing: normal;
  word-wrap: normal;
  background: #000000;
  color: #ffffff;
  hyphens: none;
}

code, a {
  text-decoration: none;
  font-weight: bolder;
  color: inherit;
}

pre {
  margin: 0px;
  overflow: auto;
  border-radius: 0.3em;
  font-weight: normal;
  overflow-y: hidden;
}

.gutter {
  text-align: right;
  padding-right: 4px;
  padding-left: 2px;
}

.code-card {
  margin-buttom: 16px;
  padding: 6px 6px 0px 6px;
  color: #ae81ff;
  font-weight: bold;
}

.code-card-heading {
  background: linear-gradient(#632697, #000);
  font-size: 22px;
  display: flex;
  justify-content: space-between;
}

.filename-heading {
  background: linear-gradient(#632697, #000);
  font-size: 22px;
  color: white;
}

.spacer {
  margin-bottom: 30px;
}

.code-card-heading-extra {
  display: flex;
}

.container {
  display: flex;
  flex-direction: row;
}

.usages {
  font-size: 16px;
  margin: auto;
}

.top-comment {
  margin-bottom: 17px;
}

.ns-ref {
  color: #f0c674;
}

.keyword {
  color: #8abeb7;
}

.var-ref {
  color: #81a2be;
}

.clojure-core {
  font-weight: bolder;
  color: #81a2be;
}

.macro {
  color: #b294bb;
}

.punctuation {
  color: #a6a6a0;
}

.ns-ref {
  color: #f0c674;
}

.string {
  color: #b5bd68;
}

.keyword {
  color: #70c0b1;
}

.java-class {
  color: #de9f25;
}

.punctuation {
  color: #a6a6a0;
}

.highlight {
  background-color: #5d007a;
}

.unparsed {
  background-color: #ff0000;
}

.added {
  background-color: #225d2d;
}

.deleted {
  background-color: #660b0b;
}

.first-seen {
  text-decoration: underline;
}

.comment {
  color: #969896;
  font-style: italic;
  font-weight: normal;
}

.diffpane {
  width: 50%;
}

.shead {
  background-color: #1224b1;
  border-radius: 10px;
}

.thead {
  background-color: #5d007a;
  border-radius: 10px;
}</style><style>p, li, .caption {
  font-family: sans-serif;
  text-align: left;
  font-size: 18px;
}

p {
  text-indent: 2em;
}

.diffpane {
  width: unset;
}

.textcontainer {
  width: 50%;
  color: white;
}

.title {
  font-size: 32px;
}

.sectiontitle {
  font-size: 24px;
  text-decoration: underline;
}

.insetcontainer {
  display: flex;
}

.insetcenter {
  display: flex;
  justify-content: center;
}

.inset {
  border: 2px solid;
  border-color: #969896;
  padding: 10px;
  display: flex;
  margin: 10px auto;
}

.fixed {
  font-family: monospace;
  background-color: #111;
}</style></head><body><div data-reactroot="" data-reactid="1" data-react-checksum="-591610410"><div class="filename-heading" data-reactid="2"><div class="title" data-reactid="3">Autochrome - Structural diffs for Clojure source code</div></div><div class="textcontainer" style="margin:auto;" data-reactid="4"><div style="margin-top:35px;" data-reactid="5"><div class="insetcenter" data-reactid="6"><div class="inset" data-reactid="7"><div style="display:flex;flex-direction:row;" data-reactid="8"><div class="diffpane" data-reactid="9"><div class="code-card" data-reactid="10"><div class="code-card-heading" data-reactid="11"><div class="code-card-heading-extra" data-reactid="12"></div></div><div class="container" data-reactid="13"><pre class="gutter" data-reactid="14"><code class="punctuation" data-reactid="15"><a href="the absolute1" data-reactid="16"><div data-reactid="17">1</div></a><a href="the absolute2" data-reactid="18"><div data-reactid="19">2</div></a><a href="the absolute3" data-reactid="20"><div data-reactid="21">3</div></a><a href="the absolute4" data-reactid="22"><div data-reactid="23">4</div></a><a href="the absolute5" data-reactid="24"><div data-reactid="25">5</div></a></code></pre><div style="width:1px;" data-reactid="26"></div><pre class="source" data-reactid="27"><!-- react-text: 28 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="29"><span class="macro clojure-core" data-reactid="30">defn</span></a><!-- react-text: 31 --> <!-- /react-text --><!-- react-text: 32 -->example<!-- /react-text --><!-- react-text: 33 -->
  [<!-- /react-text --><!-- react-text: 34 -->x<!-- /react-text --><!-- react-text: 35 -->]
  <!-- /react-text --><span class="deleted" data-reactid="36"><span data-reactid="37"><!-- react-text: 38 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="39"><span class="clojure-core" data-reactid="40">println</span></a><!-- react-text: 41 --> <!-- /react-text --><span class="string" data-reactid="42">&quot;hello!&quot;</span><!-- react-text: 43 -->)<!-- /react-text --></span></span><!-- react-text: 44 -->
  {<!-- /react-text --><span class="keyword" data-reactid="45">:more</span><!-- react-text: 46 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="47"><span class="clojure-core" data-reactid="48">inc</span></a><!-- react-text: 49 --> <!-- /react-text --><!-- react-text: 50 -->x<!-- /react-text --><!-- react-text: 51 -->)
   <!-- /react-text --><span class="keyword" data-reactid="52">:less</span><!-- react-text: 53 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="54"><span class="clojure-core" data-reactid="55">dec</span></a><!-- react-text: 56 --> <!-- /react-text --><!-- react-text: 57 -->x<!-- /react-text --><!-- react-text: 58 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="59"><div class="code-card" data-reactid="60"><div class="code-card-heading" data-reactid="61"><div class="code-card-heading-extra" data-reactid="62"></div></div><div class="container" data-reactid="63"><pre class="gutter" data-reactid="64"><code class="punctuation" data-reactid="65"><a href="worst hack1" data-reactid="66"><div data-reactid="67">1</div></a><a href="worst hack2" data-reactid="68"><div data-reactid="69">2</div></a><a href="worst hack3" data-reactid="70"><div data-reactid="71">3</div></a><a href="worst hack4" data-reactid="72"><div data-reactid="73">4</div></a><a href="worst hack5" data-reactid="74"><div data-reactid="75">5</div></a></code></pre><div style="width:1px;" data-reactid="76"></div><pre class="source" data-reactid="77"><!-- react-text: 78 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="79"><span class="macro clojure-core" data-reactid="80">defn</span></a><!-- react-text: 81 --> <!-- /react-text --><!-- react-text: 82 -->example<!-- /react-text --><!-- react-text: 83 -->
  [<!-- /react-text --><!-- react-text: 84 -->x<!-- /react-text --><!-- react-text: 85 -->]
  (<!-- /react-text --><span class="added" data-reactid="86">-&gt;</span><!-- react-text: 87 --> {<!-- /react-text --><span class="keyword" data-reactid="88">:more</span><!-- react-text: 89 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="90"><span class="clojure-core" data-reactid="91">inc</span></a><!-- react-text: 92 --> <!-- /react-text --><!-- react-text: 93 -->x<!-- /react-text --><!-- react-text: 94 -->)
       <!-- /react-text --><span class="keyword" data-reactid="95">:less</span><!-- react-text: 96 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="97"><span class="clojure-core" data-reactid="98">dec</span></a><!-- react-text: 99 --> <!-- /react-text --><!-- react-text: 100 -->x<!-- /react-text --><!-- react-text: 101 -->)}
      <!-- /react-text --><span class="added" data-reactid="102"><span data-reactid="103"><!-- react-text: 104 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="105"><span class="clojure-core" data-reactid="106">assoc</span></a><!-- react-text: 107 --> <!-- /react-text --><span class="keyword" data-reactid="108">:twice</span><!-- react-text: 109 --> <!-- /react-text --><span data-reactid="110"><!-- react-text: 111 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="112"><span class="clojure-core" data-reactid="113">+</span></a><!-- react-text: 114 --> <!-- /react-text --><!-- react-text: 115 -->x<!-- /react-text --><!-- react-text: 116 --> <!-- /react-text --><!-- react-text: 117 -->x<!-- /react-text --><!-- react-text: 118 -->)<!-- /react-text --></span><!-- react-text: 119 -->)<!-- /react-text --></span></span><!-- react-text: 120 -->))<!-- /react-text --></pre></div></div></div></div></div></div></div><p data-reactid="121"><div data-reactid="122"><div class="sectiontitle" data-reactid="123">Abstract</div><p data-reactid="124"><!-- react-text: 125 -->Autochrome uses a full parse to highlight and structurally diff Clojure source code.  <!-- /react-text --><!-- react-text: 126 -->It aims to make the experience of reviewing Clojure code just as nice as writing it.  <!-- /react-text --><!-- react-text: 127 -->It takes the form of a command-line tool which writes diffs as HTML to stdout: <!-- /react-text --></p><div class="insetcenter" data-reactid="128"><div class="inset" data-reactid="129"><pre data-reactid="130"><!-- react-text: 131 -->$ lein run &lt;owner&gt; &lt;repo&gt; &lt;pull-request-id&gt; <!-- /react-text --><span class="comment" data-reactid="132"> # generate diff for a GitHub pull request</span><!-- react-text: 133 -->
$ lein run &lt;old-tree&gt; &lt;new-tree&gt;<!-- /react-text --><span class="comment" data-reactid="134">             # like git diff, run it from your repo directory</span><!-- react-text: 135 -->
$ lein run -o ...<!-- /react-text --><span class="comment" data-reactid="136">                            # try to open the diff in a browser</span></pre></div></div><p data-reactid="137"><!-- react-text: 138 -->If generated from GitHub, the line numbers in Clojure diffs link back to the PR.  <!-- /react-text --><!-- react-text: 139 -->Bold symbols link to documentation.<!-- /react-text --></p></div><div data-reactid="140"><div class="sectiontitle" data-reactid="141">Features</div><p data-reactid="142"><ul data-reactid="143"><li data-reactid="144"><!-- react-text: 145 -->Scope-aware highlighting:<!-- /react-text --><div class="insetcontainer" data-reactid="146"><div class="inset" data-reactid="147"><div class="code-card" data-reactid="148"><div class="code-card-heading" data-reactid="149"><div class="code-card-heading-extra" data-reactid="150"></div></div><div class="container" data-reactid="151"><pre class="gutter" data-reactid="152"><code class="punctuation" data-reactid="153"><a href="more hacks1" data-reactid="154"><div data-reactid="155">1</div></a><a href="more hacks2" data-reactid="156"><div data-reactid="157">2</div></a><a href="more hacks3" data-reactid="158"><div data-reactid="159">3</div></a><a href="more hacks4" data-reactid="160"><div data-reactid="161">4</div></a></code></pre><div style="width:1px;" data-reactid="162"></div><pre class="source" data-reactid="163"><!-- react-text: 164 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/let" data-reactid="165"><span class="macro clojure-core" data-reactid="166">let</span></a><!-- react-text: 167 --> [<!-- /react-text --><!-- react-text: 168 -->keyword<!-- /react-text --><!-- react-text: 169 --> <!-- /react-text --><span class="keyword" data-reactid="170">:hello/world</span><!-- react-text: 171 -->
      <!-- /react-text --><!-- react-text: 172 -->name<!-- /react-text --><!-- react-text: 173 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/name" data-reactid="174"><span class="clojure-core" data-reactid="175">name</span></a><!-- react-text: 176 --> <!-- /react-text --><!-- react-text: 177 -->keyword<!-- /react-text --><!-- react-text: 178 -->)
      [<!-- /react-text --><!-- react-text: 179 -->a<!-- /react-text --><!-- react-text: 180 --> <!-- /react-text --><!-- react-text: 181 -->b<!-- /react-text --><!-- react-text: 182 --> <!-- /react-text --><span class="keyword" data-reactid="183">:as</span><!-- react-text: 184 --> <!-- /react-text --><!-- react-text: 185 -->vec<!-- /react-text --><!-- react-text: 186 -->] (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/map" data-reactid="187"><span class="clojure-core" data-reactid="188">map</span></a><!-- react-text: 189 --> <!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="190"><span class="clojure-core" data-reactid="191">inc</span></a><!-- react-text: 192 --> [<!-- /react-text --><!-- react-text: 193 -->1<!-- /react-text --><!-- react-text: 194 --> <!-- /react-text --><!-- react-text: 195 -->2<!-- /react-text --><!-- react-text: 196 --> <!-- /react-text --><!-- react-text: 197 -->3<!-- /react-text --><!-- react-text: 198 -->])]
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/str" data-reactid="199"><span class="clojure-core" data-reactid="200">str</span></a><!-- react-text: 201 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/namespace" data-reactid="202"><span class="clojure-core" data-reactid="203">namespace</span></a><!-- react-text: 204 --> <!-- /react-text --><!-- react-text: 205 -->keyword<!-- /react-text --><!-- react-text: 206 -->) <!-- /react-text --><!-- react-text: 207 -->name<!-- /react-text --><!-- react-text: 208 -->))<!-- /react-text --></pre></div></div></div><div style="width:100%;" data-reactid="209"></div></div></li><li data-reactid="210"><!-- react-text: 211 -->Structural diff which can cope with wrapping/stripping parens:<!-- /react-text --><div class="insetcontainer" data-reactid="212"><div class="inset" data-reactid="213"><div style="display:flex;flex-direction:row;" data-reactid="214"><div class="diffpane" data-reactid="215"><div class="code-card" data-reactid="216"><div class="code-card-heading" data-reactid="217"><div class="code-card-heading-extra" data-reactid="218"></div></div><div class="container" data-reactid="219"><pre class="gutter" data-reactid="220"><code class="punctuation" data-reactid="221"><a href="the absolute1" data-reactid="222"><div data-reactid="223">1</div></a><a href="the absolute2" data-reactid="224"><div data-reactid="225">2</div></a><a href="the absolute3" data-reactid="226"><div data-reactid="227">3</div></a><a href="the absolute4" data-reactid="228"><div data-reactid="229">4</div></a><a href="the absolute5" data-reactid="230"><div data-reactid="231">5</div></a><a href="the absolute6" data-reactid="232"><div data-reactid="233">6</div></a><a href="the absolute7" data-reactid="234"><div data-reactid="235">7</div></a></code></pre><div style="width:1px;" data-reactid="236"></div><pre class="source" data-reactid="237"><!-- react-text: 238 -->{<!-- /react-text --><span class="keyword" data-reactid="239">:a</span><!-- react-text: 240 --> <!-- /react-text --><span class="keyword" data-reactid="241">:really</span><!-- react-text: 242 -->
 <!-- /react-text --><span class="keyword" data-reactid="243">:big</span><!-- react-text: 244 --> <!-- /react-text --><span class="keyword" data-reactid="245">:thing</span><!-- react-text: 246 -->
 <!-- /react-text --><span class="deleted" data-reactid="247"><span class="keyword" data-reactid="248">:these</span></span><!-- react-text: 249 --> <!-- /react-text --><span class="deleted" data-reactid="250"><span class="keyword" data-reactid="251">:entries</span></span><!-- react-text: 252 -->
 <!-- /react-text --><span class="keyword" data-reactid="253">:which</span><!-- react-text: 254 --> <!-- /react-text --><span class="keyword" data-reactid="255">:is</span><!-- react-text: 256 -->
 <!-- /react-text --><span class="deleted" data-reactid="257"><span class="keyword" data-reactid="258">:were</span></span><!-- react-text: 259 --> <!-- /react-text --><span class="deleted" data-reactid="260"><span class="keyword" data-reactid="261">:removed</span></span><!-- react-text: 262 -->
 <!-- /react-text --><span class="keyword" data-reactid="263">:very</span><!-- react-text: 264 --> <!-- /react-text --><span class="keyword" data-reactid="265">:annoying</span><!-- react-text: 266 -->
 <!-- /react-text --><span class="keyword" data-reactid="267">:to</span><!-- react-text: 268 --> <!-- /react-text --><span class="keyword" data-reactid="269">:read</span><!-- react-text: 270 -->}<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="271"><div class="code-card" data-reactid="272"><div class="code-card-heading" data-reactid="273"><div class="code-card-heading-extra" data-reactid="274"></div></div><div class="container" data-reactid="275"><pre class="gutter" data-reactid="276"><code class="punctuation" data-reactid="277"><a href="worst hack1" data-reactid="278"><div data-reactid="279">1</div></a><a href="worst hack2" data-reactid="280"><div data-reactid="281">2</div></a><a href="worst hack3" data-reactid="282"><div data-reactid="283">3</div></a><a href="worst hack4" data-reactid="284"><div data-reactid="285">4</div></a><a href="worst hack5" data-reactid="286"><div data-reactid="287">5</div></a><a href="worst hack6" data-reactid="288"><div data-reactid="289">6</div></a><a href="worst hack7" data-reactid="290"><div data-reactid="291">7</div></a><a href="worst hack8" data-reactid="292"><div data-reactid="293">8</div></a></code></pre><div style="width:1px;" data-reactid="294"></div><pre class="source" data-reactid="295"><!-- react-text: 296 -->(<!-- /react-text --><span class="added" data-reactid="297">keys</span><!-- react-text: 298 -->
   (<!-- /react-text --><span class="added" data-reactid="299">merge</span><!-- react-text: 300 -->
    {<!-- /react-text --><span class="keyword" data-reactid="301">:a</span><!-- react-text: 302 --> <!-- /react-text --><span class="keyword" data-reactid="303">:really</span><!-- react-text: 304 -->
     <!-- /react-text --><span class="keyword" data-reactid="305">:big</span><!-- react-text: 306 --> <!-- /react-text --><span class="keyword" data-reactid="307">:thing</span><!-- react-text: 308 -->
     <!-- /react-text --><span class="keyword" data-reactid="309">:which</span><!-- react-text: 310 --> <!-- /react-text --><span class="keyword" data-reactid="311">:is</span><!-- react-text: 312 -->
     <!-- /react-text --><span class="keyword" data-reactid="313">:very</span><!-- react-text: 314 --> <!-- /react-text --><span class="keyword" data-reactid="315">:annoying</span><!-- react-text: 316 -->
     <!-- /react-text --><span class="keyword" data-reactid="317">:to</span><!-- react-text: 318 --> <!-- /react-text --><span class="keyword" data-reactid="319">:read</span><!-- react-text: 320 -->}
    <!-- /react-text --><span class="added" data-reactid="321"><span data-reactid="322"><!-- react-text: 323 -->{<!-- /react-text --><span class="keyword" data-reactid="324">:more</span><!-- react-text: 325 --> <!-- /react-text --><span class="keyword" data-reactid="326">:stuff</span><!-- react-text: 327 -->}<!-- /react-text --></span></span><!-- react-text: 328 -->))<!-- /react-text --></pre></div></div></div></div></div><div style="width:100%;" data-reactid="329"></div></div></li><li data-reactid="330"><!-- react-text: 331 -->Naturally, whitespace is ignored completely: (h/t <!-- /react-text --><a href="http://blog.klipse.tech/lambda/2016/08/07/pure-y-combinator-clojure.html" data-reactid="332">@viebel</a><!-- react-text: 333 -->)<!-- /react-text --><div class="insetcontainer" data-reactid="334"><div class="inset" data-reactid="335"><div style="display:flex;flex-direction:row;" data-reactid="336"><div class="diffpane" data-reactid="337"><div class="code-card" data-reactid="338"><div class="code-card-heading" data-reactid="339"><div class="code-card-heading-extra" data-reactid="340"></div></div><div class="container" data-reactid="341"><pre class="gutter" data-reactid="342"><code class="punctuation" data-reactid="343"><a href="the absolute1" data-reactid="344"><div data-reactid="345">1</div></a><a href="the absolute2" data-reactid="346"><div data-reactid="347">2</div></a></code></pre><div style="width:1px;" data-reactid="348"></div><pre class="source" data-reactid="349"><!-- react-text: 350 -->(<!-- /react-text --><a href="https://clojure.org/reference/special_forms#def" data-reactid="351"><span class="macro clojure-core" data-reactid="352">def</span></a><!-- react-text: 353 --> <!-- /react-text --><!-- react-text: 354 -->Y<!-- /react-text --><!-- react-text: 355 -->(<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="356"><span class="macro clojure-core" data-reactid="357">fn</span></a><!-- react-text: 358 -->[<!-- /react-text --><!-- react-text: 359 -->f<!-- /react-text --><!-- react-text: 360 -->]((<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="361"><span class="macro clojure-core" data-reactid="362">fn</span></a><!-- react-text: 363 -->[<!-- /react-text --><!-- react-text: 364 -->x<!-- /react-text --><!-- react-text: 365 -->](<!-- /react-text --><!-- react-text: 366 -->x<!-- /react-text --><!-- react-text: 367 -->,<!-- /react-text --><!-- react-text: 368 -->x<!-- /react-text --><!-- react-text: 369 -->))
(<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="370"><span class="macro clojure-core" data-reactid="371">fn</span></a><!-- react-text: 372 -->[<!-- /react-text --><!-- react-text: 373 -->x<!-- /react-text --><!-- react-text: 374 -->](<!-- /react-text --><!-- react-text: 375 -->f<!-- /react-text --><!-- react-text: 376 -->(<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="377"><span class="macro clojure-core" data-reactid="378">fn</span></a><!-- react-text: 379 -->[<!-- /react-text --><!-- react-text: 380 -->y<!-- /react-text --><!-- react-text: 381 -->]((<!-- /react-text --><!-- react-text: 382 -->x<!-- /react-text --><!-- react-text: 383 -->,<!-- /react-text --><!-- react-text: 384 -->x<!-- /react-text --><!-- react-text: 385 -->),<!-- /react-text --><!-- react-text: 386 -->y<!-- /react-text --><!-- react-text: 387 -->)))))))<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="388"><div class="code-card" data-reactid="389"><div class="code-card-heading" data-reactid="390"><div class="code-card-heading-extra" data-reactid="391"></div></div><div class="container" data-reactid="392"><pre class="gutter" data-reactid="393"><code class="punctuation" data-reactid="394"><a href="worst hack1" data-reactid="395"><div data-reactid="396">1</div></a><a href="worst hack2" data-reactid="397"><div data-reactid="398">2</div></a><a href="worst hack3" data-reactid="399"><div data-reactid="400">3</div></a><a href="worst hack4" data-reactid="401"><div data-reactid="402">4</div></a></code></pre><div style="width:1px;" data-reactid="403"></div><pre class="source" data-reactid="404"><!-- react-text: 405 -->(<!-- /react-text --><a href="https://clojure.org/reference/special_forms#def" data-reactid="406"><span class="macro clojure-core" data-reactid="407">def</span></a><!-- react-text: 408 --> <!-- /react-text --><!-- react-text: 409 -->Y<!-- /react-text --><!-- react-text: 410 -->
  (<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="411"><span class="macro clojure-core" data-reactid="412">fn</span></a><!-- react-text: 413 --> [<!-- /react-text --><!-- react-text: 414 -->f<!-- /react-text --><!-- react-text: 415 -->]
    ((<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="416"><span class="macro clojure-core" data-reactid="417">fn</span></a><!-- react-text: 418 --> [<!-- /react-text --><!-- react-text: 419 -->x<!-- /react-text --><!-- react-text: 420 -->] (<!-- /react-text --><!-- react-text: 421 -->x<!-- /react-text --><!-- react-text: 422 --> <!-- /react-text --><!-- react-text: 423 -->x<!-- /react-text --><!-- react-text: 424 -->))
     (<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="425"><span class="macro clojure-core" data-reactid="426">fn</span></a><!-- react-text: 427 --> [<!-- /react-text --><!-- react-text: 428 -->x<!-- /react-text --><!-- react-text: 429 -->] (<!-- /react-text --><!-- react-text: 430 -->f<!-- /react-text --><!-- react-text: 431 --> (<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="432"><span class="macro clojure-core" data-reactid="433">fn</span></a><!-- react-text: 434 --> [<!-- /react-text --><!-- react-text: 435 -->y<!-- /react-text --><!-- react-text: 436 -->] ((<!-- /react-text --><!-- react-text: 437 -->x<!-- /react-text --><!-- react-text: 438 --> <!-- /react-text --><!-- react-text: 439 -->x<!-- /react-text --><!-- react-text: 440 -->) <!-- /react-text --><!-- react-text: 441 -->y<!-- /react-text --><!-- react-text: 442 -->)))))))<!-- /react-text --></pre></div></div></div></div></div><div style="width:100%;" data-reactid="443"></div></div></li></ul></p></div><div data-reactid="444"><div class="sectiontitle" data-reactid="445">Misfeatures</div><p data-reactid="446"><ul data-reactid="447"><li data-reactid="448">Symbols can only have one annotation.  </li><li data-reactid="449">Terrible for viewing non-clojure diffs.  </li><li data-reactid="450">Difficult to port to ClojureScript.  </li><li data-reactid="451">Uses its own custom clojure parser.</li><li data-reactid="452">Occasionally gets strange ideas.</li></ul></p></div><div data-reactid="453"><div class="sectiontitle" data-reactid="454">How it works</div><p data-reactid="455"><!-- react-text: 456 -->Structural diffing is something I always wanted for Clojure.  <!-- /react-text --><!-- react-text: 457 -->When I saw <!-- /react-text --><a href="http://thume.ca/2017/06/17/tree-diffing/" data-reactid="458">Tristan Hume&#x27;s article about tree diffing</a><!-- react-text: 459 -->, I was inspired to give it a shot myself using the same A* pathfinding technique he described.  <!-- /react-text --><!-- react-text: 460 -->In order to apply A* to the problem of tree diffing, you need to extend the concepts <!-- /react-text --><!-- react-text: 461 -->of location, cost, distance, and adjacency to tree diffs.  Location is clearly needed to know where you are, <!-- /react-text --><!-- react-text: 462 -->but in addition they need to be comparable, so you know not to bother when you already have a better <!-- /react-text --><!-- react-text: 463 -->path to the same place.<!-- /react-text --><!-- react-text: 464 -->Cost is what makes some paths preferred over others.  For pathfinding on a road network, this would be <!-- /react-text --><!-- react-text: 465 -->the total distance traveled along the roads used.  By &#x27;distance&#x27; I really mean the A* heuristic, <!-- /react-text --><!-- react-text: 466 -->which in the case of roads might be the straight-line distance to the destination.  <!-- /react-text --><!-- react-text: 467 -->Adjacency is what states are reachable from a particular state.  For roads you might say that intersections are <!-- /react-text --><!-- react-text: 468 -->the nodes and adjacency means there is a road connecting them.  <!-- /react-text --><!-- react-text: 469 -->In autochrome:<!-- /react-text --><ul data-reactid="470"><li data-reactid="471"><!-- react-text: 472 -->Location is a pair of pointers into the source and target lists, <!-- /react-text --><!-- react-text: 473 -->plus the stack of previous locations.  Intuitively, the pointers represent a pair of <!-- /react-text --><!-- react-text: 474 -->&#x27;cursors&#x27; over the tree structure.  Without the stack of previous locations, <!-- /react-text --><!-- react-text: 475 -->comparison would break, since all locations at the end of two lists would be indistinguishable <!-- /react-text --><!-- react-text: 476 -->from the goal (the end of both root lists)<!-- /react-text --></li><li data-reactid="477"><!-- react-text: 478 -->Cost is the total size of all subtrees added and deleted, plus the number of subtree added and deleted.  <!-- /react-text --><!-- react-text: 479 -->Subtree size is 1 for empty collections, character count for text nodes, and sum size of children for branch nodes.  <!-- /react-text --><!-- react-text: 480 -->The number of subtrees changed is included in the cost so that the algorithm prefers deleting/adding entire<!-- /react-text --><!-- react-text: 481 -->lists, rather than all their elements (since they have the same cost otherwise).<!-- /react-text --></li><li data-reactid="482"><!-- react-text: 483 -->Distance is the maximum of the &quot;remaining&quot; tree sizes for the source and target tree.  <!-- /react-text --><!-- react-text: 484 -->Whenever a subtree is accounted for by being added, deleted, or matched with an identical subtree, <!-- /react-text --><!-- react-text: 485 -->its size is subtracted from the remaining size.<!-- /react-text --></li><li data-reactid="486"><!-- react-text: 487 -->Adjacency is a bit complicated:<!-- /react-text --><ul data-reactid="488"><li data-reactid="489">When the source and target cursors are over identical subtrees, we always advance both cursors.</li><li data-reactid="490"><!-- react-text: 491 -->When the source cursor is not at the end of its list, we may advance it while keeping the same <!-- /react-text --><!-- react-text: 492 -->target cursor.  This corresponds to deleting a subtree from the source list.<!-- /react-text --></li><li data-reactid="493">Likewise for the target cursor: we advance it and keep the source cursor, corresponding to a subtree addition.</li><li data-reactid="494"><!-- react-text: 495 -->When both cursors are over matching collection types, we can move both cursors into the lists.  <!-- /react-text --><!-- react-text: 496 -->We also need to push the next location onto the stack.<!-- /react-text --></li><li data-reactid="497"><!-- react-text: 498 -->When both cursors are nil, it means we have reached the end of both lists, and we need to <!-- /react-text --><!-- react-text: 499 -->pop the next location in the parent sequences off the stack.<!-- /react-text --></li></ul><p data-reactid="500"><!-- react-text: 501 -->This is the basic version of adjacency that I started with.  However, when implemented this way, <!-- /react-text --><!-- react-text: 502 -->the algorithm cannot match subtrees at different levels of nesting, since the cursors always move<!-- /react-text --><!-- react-text: 503 -->up or down together.  <!-- /react-text --><!-- react-text: 504 -->To handle changes in nesting, the cursors need to be allowed to move up and down independently, <!-- /react-text --><!-- react-text: 505 -->like they are allowed to do within lists.  This means that instead of one stack of pairs of pointers, <!-- /react-text --><!-- react-text: 506 -->we need a pair of stacks of pointers, one per cursor.  Then we need to add some state transitions: <!-- /react-text --></p><ul data-reactid="507"><li data-reactid="508">When only the source cursor is nil, pop the source stack only.</li><li data-reactid="509">Likewise for target cursor.</li><li data-reactid="510"><!-- react-text: 511 -->When the source cursor is over a branch node, move it to the first child, <!-- /react-text --><!-- react-text: 512 -->and push the next position on the source stack.<!-- /react-text --></li><li data-reactid="513">Likewise for target cursor.</li></ul><p data-reactid="514"><!-- react-text: 515 -->Since there are quite a lot of branch nodes, this creates a ton of extra states for the algorithm to explore.  <!-- /react-text --><!-- react-text: 516 -->So although it seems like the steps which move both cursors up/down would obsolete, since they can <!-- /react-text --><!-- react-text: 517 -->be replicated with two single-cursor movements, they are needed so that performance is not terrible <!-- /react-text --><!-- react-text: 518 -->on mostly identical subtrees (ie the common case).  It is also helpful to make that state cost <!-- /react-text --><!-- react-text: 519 -->less than the unmatched case, so that we only try it after matched movement fails.  <!-- /react-text --><!-- react-text: 520 -->The extra cost basically represents that we are adding or removing a set of parens, although they are not annotated. <!-- /react-text --></p></li></ul></p></div><div data-reactid="521"><div class="sectiontitle" data-reactid="522">Worked Example</div><p data-reactid="523"><!-- react-text: 524 -->I don&#x27;t know about you, but I&#x27;m not the type who can absorb the essence of a complicated algorithm from a wall of text as seen above.  <!-- /react-text --><!-- react-text: 525 -->So let&#x27;s look at a detailed log of all the states we explored when generating the example diff at the top of this page.  <!-- /react-text --><!-- react-text: 526 -->Note that these are all the states we <!-- /react-text --><i data-reactid="527">explore</i><!-- react-text: 528 --> - some of them are never popped as the min-cost element of the PQ.  <!-- /react-text --><!-- react-text: 529 -->Here is our initial state:<!-- /react-text --></p><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="530"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="531"><div id="1197398913" data-reactid="532"><div class="filename-heading" data-reactid="533"><span data-reactid="534"><!-- react-text: 535 -->#00 (popped) -0,+0 cost 0/-92 remain 90/92<!-- /react-text --><span data-reactid="536"><!-- react-text: 537 --> (<!-- /react-text --><!-- react-text: 538 -->475edb81<!-- /react-text --><!-- react-text: 539 --> from <!-- /react-text --><a href="#" data-reactid="540"></a><!-- react-text: 541 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="542"><div class="diffpane" data-reactid="543"><div class="code-card" data-reactid="544"><div class="code-card-heading" data-reactid="545"><div class="code-card-heading-extra" data-reactid="546"></div></div><div class="container" data-reactid="547"><pre class="gutter" data-reactid="548"><code class="punctuation" data-reactid="549"><a href="the absolute1" data-reactid="550"><div data-reactid="551">1</div></a><a href="the absolute2" data-reactid="552"><div data-reactid="553">2</div></a><a href="the absolute3" data-reactid="554"><div data-reactid="555">3</div></a><a href="the absolute4" data-reactid="556"><div data-reactid="557">4</div></a><a href="the absolute5" data-reactid="558"><div data-reactid="559">5</div></a></code></pre><div style="width:1px;" data-reactid="560"></div><pre class="source" data-reactid="561"><!-- react-text: 562 -->(<!-- /react-text --><span class="shead" data-reactid="563">defn</span><!-- react-text: 564 --> <!-- /react-text --><!-- react-text: 565 -->example<!-- /react-text --><!-- react-text: 566 -->
  [<!-- /react-text --><!-- react-text: 567 -->x<!-- /react-text --><!-- react-text: 568 -->]
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="569"><span class="clojure-core" data-reactid="570">println</span></a><!-- react-text: 571 --> <!-- /react-text --><span class="string" data-reactid="572">&quot;hello!&quot;</span><!-- react-text: 573 -->)
  {<!-- /react-text --><span class="keyword" data-reactid="574">:more</span><!-- react-text: 575 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="576"><span class="clojure-core" data-reactid="577">inc</span></a><!-- react-text: 578 --> <!-- /react-text --><!-- react-text: 579 -->x<!-- /react-text --><!-- react-text: 580 -->)
   <!-- /react-text --><span class="keyword" data-reactid="581">:less</span><!-- react-text: 582 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="583"><span class="clojure-core" data-reactid="584">dec</span></a><!-- react-text: 585 --> <!-- /react-text --><!-- react-text: 586 -->x<!-- /react-text --><!-- react-text: 587 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="588"><div class="code-card" data-reactid="589"><div class="code-card-heading" data-reactid="590"><div class="code-card-heading-extra" data-reactid="591"></div></div><div class="container" data-reactid="592"><pre class="gutter" data-reactid="593"><code class="punctuation" data-reactid="594"><a href="worst hack1" data-reactid="595"><div data-reactid="596">1</div></a><a href="worst hack2" data-reactid="597"><div data-reactid="598">2</div></a><a href="worst hack3" data-reactid="599"><div data-reactid="600">3</div></a><a href="worst hack4" data-reactid="601"><div data-reactid="602">4</div></a><a href="worst hack5" data-reactid="603"><div data-reactid="604">5</div></a></code></pre><div style="width:1px;" data-reactid="605"></div><pre class="source" data-reactid="606"><!-- react-text: 607 -->(<!-- /react-text --><span class="thead" data-reactid="608">defn</span><!-- react-text: 609 --> <!-- /react-text --><!-- react-text: 610 -->example<!-- /react-text --><!-- react-text: 611 -->
  [<!-- /react-text --><!-- react-text: 612 -->x<!-- /react-text --><!-- react-text: 613 -->]
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/-&gt;" data-reactid="614"><span class="macro clojure-core" data-reactid="615">-&gt;</span></a><!-- react-text: 616 --> {<!-- /react-text --><span class="keyword" data-reactid="617">:more</span><!-- react-text: 618 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="619"><span class="clojure-core" data-reactid="620">inc</span></a><!-- react-text: 621 --> <!-- /react-text --><!-- react-text: 622 -->x<!-- /react-text --><!-- react-text: 623 -->)
       <!-- /react-text --><span class="keyword" data-reactid="624">:less</span><!-- react-text: 625 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="626"><span class="clojure-core" data-reactid="627">dec</span></a><!-- react-text: 628 --> <!-- /react-text --><!-- react-text: 629 -->x<!-- /react-text --><!-- react-text: 630 -->)}
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="631"><span class="clojure-core" data-reactid="632">assoc</span></a><!-- react-text: 633 --> <!-- /react-text --><span class="keyword" data-reactid="634">:twice</span><!-- react-text: 635 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="636"><span class="clojure-core" data-reactid="637">+</span></a><!-- react-text: 638 --> <!-- /react-text --><!-- react-text: 639 -->x<!-- /react-text --><!-- react-text: 640 --> <!-- /react-text --><!-- react-text: 641 -->x<!-- /react-text --><!-- react-text: 642 -->))))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="643"></div></div><span class="caption" data-reactid="644"><!-- react-text: 645 -->The source cursor is blue, and the target cursor is purple.  <!-- /react-text --><!-- react-text: 646 -->The header at the top shows information about the diff state:<!-- /react-text --><ul data-reactid="647"><li data-reactid="648"><span class="fixed" data-reactid="649">#000</span><!-- react-text: 650 -->  is the step in which this state was added.  <!-- /react-text --></li><li data-reactid="651"><span class="fixed" data-reactid="652">(popped)</span><!-- react-text: 653 -->  means this state was popped off the priority queue.  <!-- /react-text --></li><li data-reactid="654"><span class="fixed" data-reactid="655">-0/+0</span><!-- react-text: 656 -->  is deletions/additions<!-- /react-text --></li><li data-reactid="657"><span class="fixed" data-reactid="658">cost 0/-92</span><!-- react-text: 659 -->  is the heuristic cost / real cost.  Meaningless for start node.<!-- /react-text --></li><li data-reactid="660"><span class="fixed" data-reactid="661">remain 90/92</span><!-- react-text: 662 -->  is the remaining cost of the source and target trees.<!-- /react-text --></li></ul><span class="caption" data-reactid="663"><!-- react-text: 664 -->Note that real cost = heuristic cost - max(source remaining, target remaining).  <!-- /react-text --><!-- react-text: 665 -->By heuristic cost, I mean the estimated total distance from the start to the goal, used as the key in the priority queue, <!-- /react-text --><!-- react-text: 666 -->or <!-- /react-text --><i data-reactid="667">g(n) + h(n)</i><!-- react-text: 668 --> in <!-- /react-text --><a href="https://en.wikipedia.org/wiki/A*_search_algorithm#Description" data-reactid="669">typical A* notation.  </a></span></span><span class="caption" data-reactid="670">After we enter the main loop and pop the start state, we easily match the next two subtrees:</span><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="671"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="672"><div style="display:flex;flex-direction:column;" data-reactid="673"><div id="648485472" data-reactid="674"><div class="filename-heading" data-reactid="675"><span data-reactid="676"><!-- react-text: 677 -->#01 (popped best) -0,+0 cost 88/0 remain 86/88<!-- /react-text --><span data-reactid="678"><!-- react-text: 679 --> (<!-- /react-text --><!-- react-text: 680 -->26a71a60<!-- /react-text --><!-- react-text: 681 --> from <!-- /react-text --><a href="#1197398913" data-reactid="682">475edb81</a><!-- react-text: 683 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="684"><div class="diffpane" data-reactid="685"><div class="code-card" data-reactid="686"><div class="code-card-heading" data-reactid="687"><div class="code-card-heading-extra" data-reactid="688"></div></div><div class="container" data-reactid="689"><pre class="gutter" data-reactid="690"><code class="punctuation" data-reactid="691"><a href="the absolute1" data-reactid="692"><div data-reactid="693">1</div></a><a href="the absolute2" data-reactid="694"><div data-reactid="695">2</div></a><a href="the absolute3" data-reactid="696"><div data-reactid="697">3</div></a><a href="the absolute4" data-reactid="698"><div data-reactid="699">4</div></a><a href="the absolute5" data-reactid="700"><div data-reactid="701">5</div></a></code></pre><div style="width:1px;" data-reactid="702"></div><pre class="source" data-reactid="703"><!-- react-text: 704 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="705"><span class="macro clojure-core" data-reactid="706">defn</span></a><!-- react-text: 707 --> <!-- /react-text --><span class="shead" data-reactid="708">example</span><!-- react-text: 709 -->
  [<!-- /react-text --><!-- react-text: 710 -->x<!-- /react-text --><!-- react-text: 711 -->]
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="712"><span class="clojure-core" data-reactid="713">println</span></a><!-- react-text: 714 --> <!-- /react-text --><span class="string" data-reactid="715">&quot;hello!&quot;</span><!-- react-text: 716 -->)
  {<!-- /react-text --><span class="keyword" data-reactid="717">:more</span><!-- react-text: 718 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="719"><span class="clojure-core" data-reactid="720">inc</span></a><!-- react-text: 721 --> <!-- /react-text --><!-- react-text: 722 -->x<!-- /react-text --><!-- react-text: 723 -->)
   <!-- /react-text --><span class="keyword" data-reactid="724">:less</span><!-- react-text: 725 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="726"><span class="clojure-core" data-reactid="727">dec</span></a><!-- react-text: 728 --> <!-- /react-text --><!-- react-text: 729 -->x<!-- /react-text --><!-- react-text: 730 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="731"><div class="code-card" data-reactid="732"><div class="code-card-heading" data-reactid="733"><div class="code-card-heading-extra" data-reactid="734"></div></div><div class="container" data-reactid="735"><pre class="gutter" data-reactid="736"><code class="punctuation" data-reactid="737"><a href="worst hack1" data-reactid="738"><div data-reactid="739">1</div></a><a href="worst hack2" data-reactid="740"><div data-reactid="741">2</div></a><a href="worst hack3" data-reactid="742"><div data-reactid="743">3</div></a><a href="worst hack4" data-reactid="744"><div data-reactid="745">4</div></a><a href="worst hack5" data-reactid="746"><div data-reactid="747">5</div></a></code></pre><div style="width:1px;" data-reactid="748"></div><pre class="source" data-reactid="749"><!-- react-text: 750 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="751"><span class="macro clojure-core" data-reactid="752">defn</span></a><!-- react-text: 753 --> <!-- /react-text --><span class="thead" data-reactid="754">example</span><!-- react-text: 755 -->
  [<!-- /react-text --><!-- react-text: 756 -->x<!-- /react-text --><!-- react-text: 757 -->]
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/-&gt;" data-reactid="758"><span class="macro clojure-core" data-reactid="759">-&gt;</span></a><!-- react-text: 760 --> {<!-- /react-text --><span class="keyword" data-reactid="761">:more</span><!-- react-text: 762 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="763"><span class="clojure-core" data-reactid="764">inc</span></a><!-- react-text: 765 --> <!-- /react-text --><!-- react-text: 766 -->x<!-- /react-text --><!-- react-text: 767 -->)
       <!-- /react-text --><span class="keyword" data-reactid="768">:less</span><!-- react-text: 769 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="770"><span class="clojure-core" data-reactid="771">dec</span></a><!-- react-text: 772 --> <!-- /react-text --><!-- react-text: 773 -->x<!-- /react-text --><!-- react-text: 774 -->)}
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="775"><span class="clojure-core" data-reactid="776">assoc</span></a><!-- react-text: 777 --> <!-- /react-text --><span class="keyword" data-reactid="778">:twice</span><!-- react-text: 779 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="780"><span class="clojure-core" data-reactid="781">+</span></a><!-- react-text: 782 --> <!-- /react-text --><!-- react-text: 783 -->x<!-- /react-text --><!-- react-text: 784 --> <!-- /react-text --><!-- react-text: 785 -->x<!-- /react-text --><!-- react-text: 786 -->))))<!-- /react-text --></pre></div></div></div></div></div><div class="spacer" data-reactid="787"></div><div id="1531034369" data-reactid="788"><div class="filename-heading" data-reactid="789"><span data-reactid="790"><!-- react-text: 791 -->#02 (popped best) -0,+0 cost 81/0 remain 79/81<!-- /react-text --><span data-reactid="792"><!-- react-text: 793 --> (<!-- /react-text --><!-- react-text: 794 -->5b41bb01<!-- /react-text --><!-- react-text: 795 --> from <!-- /react-text --><a href="#648485472" data-reactid="796">26a71a60</a><!-- react-text: 797 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="798"><div class="diffpane" data-reactid="799"><div class="code-card" data-reactid="800"><div class="code-card-heading" data-reactid="801"><div class="code-card-heading-extra" data-reactid="802"></div></div><div class="container" data-reactid="803"><pre class="gutter" data-reactid="804"><code class="punctuation" data-reactid="805"><a href="the absolute1" data-reactid="806"><div data-reactid="807">1</div></a><a href="the absolute2" data-reactid="808"><div data-reactid="809">2</div></a><a href="the absolute3" data-reactid="810"><div data-reactid="811">3</div></a><a href="the absolute4" data-reactid="812"><div data-reactid="813">4</div></a><a href="the absolute5" data-reactid="814"><div data-reactid="815">5</div></a></code></pre><div style="width:1px;" data-reactid="816"></div><pre class="source" data-reactid="817"><!-- react-text: 818 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="819"><span class="macro clojure-core" data-reactid="820">defn</span></a><!-- react-text: 821 --> <!-- /react-text --><!-- react-text: 822 -->example<!-- /react-text --><!-- react-text: 823 -->
  <!-- /react-text --><span class="shead" data-reactid="824"><span data-reactid="825"><!-- react-text: 826 -->[<!-- /react-text --><!-- react-text: 827 -->x<!-- /react-text --><!-- react-text: 828 -->]<!-- /react-text --></span></span><!-- react-text: 829 -->
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="830"><span class="clojure-core" data-reactid="831">println</span></a><!-- react-text: 832 --> <!-- /react-text --><span class="string" data-reactid="833">&quot;hello!&quot;</span><!-- react-text: 834 -->)
  {<!-- /react-text --><span class="keyword" data-reactid="835">:more</span><!-- react-text: 836 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="837"><span class="clojure-core" data-reactid="838">inc</span></a><!-- react-text: 839 --> <!-- /react-text --><!-- react-text: 840 -->x<!-- /react-text --><!-- react-text: 841 -->)
   <!-- /react-text --><span class="keyword" data-reactid="842">:less</span><!-- react-text: 843 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="844"><span class="clojure-core" data-reactid="845">dec</span></a><!-- react-text: 846 --> <!-- /react-text --><!-- react-text: 847 -->x<!-- /react-text --><!-- react-text: 848 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="849"><div class="code-card" data-reactid="850"><div class="code-card-heading" data-reactid="851"><div class="code-card-heading-extra" data-reactid="852"></div></div><div class="container" data-reactid="853"><pre class="gutter" data-reactid="854"><code class="punctuation" data-reactid="855"><a href="worst hack1" data-reactid="856"><div data-reactid="857">1</div></a><a href="worst hack2" data-reactid="858"><div data-reactid="859">2</div></a><a href="worst hack3" data-reactid="860"><div data-reactid="861">3</div></a><a href="worst hack4" data-reactid="862"><div data-reactid="863">4</div></a><a href="worst hack5" data-reactid="864"><div data-reactid="865">5</div></a></code></pre><div style="width:1px;" data-reactid="866"></div><pre class="source" data-reactid="867"><!-- react-text: 868 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="869"><span class="macro clojure-core" data-reactid="870">defn</span></a><!-- react-text: 871 --> <!-- /react-text --><!-- react-text: 872 -->example<!-- /react-text --><!-- react-text: 873 -->
  <!-- /react-text --><span class="thead" data-reactid="874"><span data-reactid="875"><!-- react-text: 876 -->[<!-- /react-text --><!-- react-text: 877 -->x<!-- /react-text --><!-- react-text: 878 -->]<!-- /react-text --></span></span><!-- react-text: 879 -->
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/-&gt;" data-reactid="880"><span class="macro clojure-core" data-reactid="881">-&gt;</span></a><!-- react-text: 882 --> {<!-- /react-text --><span class="keyword" data-reactid="883">:more</span><!-- react-text: 884 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="885"><span class="clojure-core" data-reactid="886">inc</span></a><!-- react-text: 887 --> <!-- /react-text --><!-- react-text: 888 -->x<!-- /react-text --><!-- react-text: 889 -->)
       <!-- /react-text --><span class="keyword" data-reactid="890">:less</span><!-- react-text: 891 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="892"><span class="clojure-core" data-reactid="893">dec</span></a><!-- react-text: 894 --> <!-- /react-text --><!-- react-text: 895 -->x<!-- /react-text --><!-- react-text: 896 -->)}
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="897"><span class="clojure-core" data-reactid="898">assoc</span></a><!-- react-text: 899 --> <!-- /react-text --><span class="keyword" data-reactid="900">:twice</span><!-- react-text: 901 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="902"><span class="clojure-core" data-reactid="903">+</span></a><!-- react-text: 904 --> <!-- /react-text --><!-- react-text: 905 -->x<!-- /react-text --><!-- react-text: 906 --> <!-- /react-text --><!-- react-text: 907 -->x<!-- /react-text --><!-- react-text: 908 -->))))<!-- /react-text --></pre></div></div></div></div></div><div class="spacer" data-reactid="909"></div><div id="516282927" data-reactid="910"><div class="filename-heading" data-reactid="911"><span data-reactid="912"><!-- react-text: 913 -->#03 (popped best) -0,+0 cost 80/0 remain 78/80<!-- /react-text --><span data-reactid="914"><!-- react-text: 915 --> (<!-- /react-text --><!-- react-text: 916 -->1ec5da2f<!-- /react-text --><!-- react-text: 917 --> from <!-- /react-text --><a href="#1531034369" data-reactid="918">5b41bb01</a><!-- react-text: 919 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="920"><div class="diffpane" data-reactid="921"><div class="code-card" data-reactid="922"><div class="code-card-heading" data-reactid="923"><div class="code-card-heading-extra" data-reactid="924"></div></div><div class="container" data-reactid="925"><pre class="gutter" data-reactid="926"><code class="punctuation" data-reactid="927"><a href="the absolute1" data-reactid="928"><div data-reactid="929">1</div></a><a href="the absolute2" data-reactid="930"><div data-reactid="931">2</div></a><a href="the absolute3" data-reactid="932"><div data-reactid="933">3</div></a><a href="the absolute4" data-reactid="934"><div data-reactid="935">4</div></a><a href="the absolute5" data-reactid="936"><div data-reactid="937">5</div></a></code></pre><div style="width:1px;" data-reactid="938"></div><pre class="source" data-reactid="939"><!-- react-text: 940 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="941"><span class="macro clojure-core" data-reactid="942">defn</span></a><!-- react-text: 943 --> <!-- /react-text --><!-- react-text: 944 -->example<!-- /react-text --><!-- react-text: 945 -->
  [<!-- /react-text --><!-- react-text: 946 -->x<!-- /react-text --><!-- react-text: 947 -->]
  <!-- /react-text --><span class="shead" data-reactid="948"><span data-reactid="949"><!-- react-text: 950 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="951"><span class="clojure-core" data-reactid="952">println</span></a><!-- react-text: 953 --> <!-- /react-text --><span class="string" data-reactid="954">&quot;hello!&quot;</span><!-- react-text: 955 -->)<!-- /react-text --></span></span><!-- react-text: 956 -->
  {<!-- /react-text --><span class="keyword" data-reactid="957">:more</span><!-- react-text: 958 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="959"><span class="clojure-core" data-reactid="960">inc</span></a><!-- react-text: 961 --> <!-- /react-text --><!-- react-text: 962 -->x<!-- /react-text --><!-- react-text: 963 -->)
   <!-- /react-text --><span class="keyword" data-reactid="964">:less</span><!-- react-text: 965 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="966"><span class="clojure-core" data-reactid="967">dec</span></a><!-- react-text: 968 --> <!-- /react-text --><!-- react-text: 969 -->x<!-- /react-text --><!-- react-text: 970 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="971"><div class="code-card" data-reactid="972"><div class="code-card-heading" data-reactid="973"><div class="code-card-heading-extra" data-reactid="974"></div></div><div class="container" data-reactid="975"><pre class="gutter" data-reactid="976"><code class="punctuation" data-reactid="977"><a href="worst hack1" data-reactid="978"><div data-reactid="979">1</div></a><a href="worst hack2" data-reactid="980"><div data-reactid="981">2</div></a><a href="worst hack3" data-reactid="982"><div data-reactid="983">3</div></a><a href="worst hack4" data-reactid="984"><div data-reactid="985">4</div></a><a href="worst hack5" data-reactid="986"><div data-reactid="987">5</div></a></code></pre><div style="width:1px;" data-reactid="988"></div><pre class="source" data-reactid="989"><!-- react-text: 990 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="991"><span class="macro clojure-core" data-reactid="992">defn</span></a><!-- react-text: 993 --> <!-- /react-text --><!-- react-text: 994 -->example<!-- /react-text --><!-- react-text: 995 -->
  [<!-- /react-text --><!-- react-text: 996 -->x<!-- /react-text --><!-- react-text: 997 -->]
  <!-- /react-text --><span class="thead" data-reactid="998"><span data-reactid="999"><!-- react-text: 1000 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/-&gt;" data-reactid="1001"><span class="macro clojure-core" data-reactid="1002">-&gt;</span></a><!-- react-text: 1003 --> <!-- /react-text --><span data-reactid="1004"><!-- react-text: 1005 -->{<!-- /react-text --><span class="keyword" data-reactid="1006">:more</span><!-- react-text: 1007 --> <!-- /react-text --><span data-reactid="1008"><!-- react-text: 1009 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1010"><span class="clojure-core" data-reactid="1011">inc</span></a><!-- react-text: 1012 --> <!-- /react-text --><!-- react-text: 1013 -->x<!-- /react-text --><!-- react-text: 1014 -->)<!-- /react-text --></span><!-- react-text: 1015 -->
<!-- /react-text --><!-- react-text: 1016 -->       <!-- /react-text --><span class="keyword" data-reactid="1017">:less</span><!-- react-text: 1018 --> <!-- /react-text --><span data-reactid="1019"><!-- react-text: 1020 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1021"><span class="clojure-core" data-reactid="1022">dec</span></a><!-- react-text: 1023 --> <!-- /react-text --><!-- react-text: 1024 -->x<!-- /react-text --><!-- react-text: 1025 -->)<!-- /react-text --></span><!-- react-text: 1026 -->}<!-- /react-text --></span><!-- react-text: 1027 -->
<!-- /react-text --><!-- react-text: 1028 -->      <!-- /react-text --><span data-reactid="1029"><!-- react-text: 1030 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1031"><span class="clojure-core" data-reactid="1032">assoc</span></a><!-- react-text: 1033 --> <!-- /react-text --><span class="keyword" data-reactid="1034">:twice</span><!-- react-text: 1035 --> <!-- /react-text --><span data-reactid="1036"><!-- react-text: 1037 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1038"><span class="clojure-core" data-reactid="1039">+</span></a><!-- react-text: 1040 --> <!-- /react-text --><!-- react-text: 1041 -->x<!-- /react-text --><!-- react-text: 1042 --> <!-- /react-text --><!-- react-text: 1043 -->x<!-- /react-text --><!-- react-text: 1044 -->)<!-- /react-text --></span><!-- react-text: 1045 -->)<!-- /react-text --></span><!-- react-text: 1046 -->)<!-- /react-text --></span></span><!-- react-text: 1047 -->)<!-- /react-text --></pre></div></div></div></div></div></div></div><div style="width:100%;" data-reactid="1048"></div></div><span class="caption" data-reactid="1049"><!-- react-text: 1050 -->Now we have our first mismatch.  We have a few options here:<!-- /react-text --><ol data-reactid="1051"><li data-reactid="1052">Delete blue subtree</li><li data-reactid="1053">Add purple subtree</li><li data-reactid="1054">Go into both subtrees</li><li data-reactid="1055">Go into blue subtree only</li><li data-reactid="1056">Go into purple subtree only</li></ol></span><span class="caption" data-reactid="1057">We explore all of those options, but eventually we choose the last:</span><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1058"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1059"><div id="866214491" data-reactid="1060"><div class="filename-heading" data-reactid="1061"><span data-reactid="1062"><!-- react-text: 1063 -->#08 (popped best) -0,+0 cost 82/2 remain 78/80<!-- /react-text --><span data-reactid="1064"><!-- react-text: 1065 --> (<!-- /react-text --><!-- react-text: 1066 -->33a1625b<!-- /react-text --><!-- react-text: 1067 --> from <!-- /react-text --><a href="#516282927" data-reactid="1068">1ec5da2f</a><!-- react-text: 1069 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1070"><div class="diffpane" data-reactid="1071"><div class="code-card" data-reactid="1072"><div class="code-card-heading" data-reactid="1073"><div class="code-card-heading-extra" data-reactid="1074"></div></div><div class="container" data-reactid="1075"><pre class="gutter" data-reactid="1076"><code class="punctuation" data-reactid="1077"><a href="the absolute1" data-reactid="1078"><div data-reactid="1079">1</div></a><a href="the absolute2" data-reactid="1080"><div data-reactid="1081">2</div></a><a href="the absolute3" data-reactid="1082"><div data-reactid="1083">3</div></a><a href="the absolute4" data-reactid="1084"><div data-reactid="1085">4</div></a><a href="the absolute5" data-reactid="1086"><div data-reactid="1087">5</div></a></code></pre><div style="width:1px;" data-reactid="1088"></div><pre class="source" data-reactid="1089"><!-- react-text: 1090 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1091"><span class="macro clojure-core" data-reactid="1092">defn</span></a><!-- react-text: 1093 --> <!-- /react-text --><!-- react-text: 1094 -->example<!-- /react-text --><!-- react-text: 1095 -->
  [<!-- /react-text --><!-- react-text: 1096 -->x<!-- /react-text --><!-- react-text: 1097 -->]
  <!-- /react-text --><span class="shead" data-reactid="1098"><span data-reactid="1099"><!-- react-text: 1100 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1101"><span class="clojure-core" data-reactid="1102">println</span></a><!-- react-text: 1103 --> <!-- /react-text --><span class="string" data-reactid="1104">&quot;hello!&quot;</span><!-- react-text: 1105 -->)<!-- /react-text --></span></span><!-- react-text: 1106 -->
  {<!-- /react-text --><span class="keyword" data-reactid="1107">:more</span><!-- react-text: 1108 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1109"><span class="clojure-core" data-reactid="1110">inc</span></a><!-- react-text: 1111 --> <!-- /react-text --><!-- react-text: 1112 -->x<!-- /react-text --><!-- react-text: 1113 -->)
   <!-- /react-text --><span class="keyword" data-reactid="1114">:less</span><!-- react-text: 1115 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1116"><span class="clojure-core" data-reactid="1117">dec</span></a><!-- react-text: 1118 --> <!-- /react-text --><!-- react-text: 1119 -->x<!-- /react-text --><!-- react-text: 1120 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1121"><div class="code-card" data-reactid="1122"><div class="code-card-heading" data-reactid="1123"><div class="code-card-heading-extra" data-reactid="1124"></div></div><div class="container" data-reactid="1125"><pre class="gutter" data-reactid="1126"><code class="punctuation" data-reactid="1127"><a href="worst hack1" data-reactid="1128"><div data-reactid="1129">1</div></a><a href="worst hack2" data-reactid="1130"><div data-reactid="1131">2</div></a><a href="worst hack3" data-reactid="1132"><div data-reactid="1133">3</div></a><a href="worst hack4" data-reactid="1134"><div data-reactid="1135">4</div></a><a href="worst hack5" data-reactid="1136"><div data-reactid="1137">5</div></a></code></pre><div style="width:1px;" data-reactid="1138"></div><pre class="source" data-reactid="1139"><!-- react-text: 1140 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1141"><span class="macro clojure-core" data-reactid="1142">defn</span></a><!-- react-text: 1143 --> <!-- /react-text --><!-- react-text: 1144 -->example<!-- /react-text --><!-- react-text: 1145 -->
  [<!-- /react-text --><!-- react-text: 1146 -->x<!-- /react-text --><!-- react-text: 1147 -->]
  (<!-- /react-text --><span class="thead" data-reactid="1148">-&gt;</span><!-- react-text: 1149 --> {<!-- /react-text --><span class="keyword" data-reactid="1150">:more</span><!-- react-text: 1151 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1152"><span class="clojure-core" data-reactid="1153">inc</span></a><!-- react-text: 1154 --> <!-- /react-text --><!-- react-text: 1155 -->x<!-- /react-text --><!-- react-text: 1156 -->)
       <!-- /react-text --><span class="keyword" data-reactid="1157">:less</span><!-- react-text: 1158 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1159"><span class="clojure-core" data-reactid="1160">dec</span></a><!-- react-text: 1161 --> <!-- /react-text --><!-- react-text: 1162 -->x<!-- /react-text --><!-- react-text: 1163 -->)}
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1164"><span class="clojure-core" data-reactid="1165">assoc</span></a><!-- react-text: 1166 --> <!-- /react-text --><span class="keyword" data-reactid="1167">:twice</span><!-- react-text: 1168 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1169"><span class="clojure-core" data-reactid="1170">+</span></a><!-- react-text: 1171 --> <!-- /react-text --><!-- react-text: 1172 -->x<!-- /react-text --><!-- react-text: 1173 --> <!-- /react-text --><!-- react-text: 1174 -->x<!-- /react-text --><!-- react-text: 1175 -->))))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1176"></div></div><span class="caption" data-reactid="1177"><!-- react-text: 1178 -->Then we add <!-- /react-text --><span class="fixed" data-reactid="1179">-&gt;</span></span><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1180"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1181"><div id="1987853169" data-reactid="1182"><div class="filename-heading" data-reactid="1183"><span data-reactid="1184"><!-- react-text: 1185 -->#12 (popped best) -0,+1 cost 83/5 remain 78/78<!-- /react-text --><span data-reactid="1186"><!-- react-text: 1187 --> (<!-- /react-text --><!-- react-text: 1188 -->767c3b71<!-- /react-text --><!-- react-text: 1189 --> from <!-- /react-text --><a href="#866214491" data-reactid="1190">33a1625b</a><!-- react-text: 1191 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1192"><div class="diffpane" data-reactid="1193"><div class="code-card" data-reactid="1194"><div class="code-card-heading" data-reactid="1195"><div class="code-card-heading-extra" data-reactid="1196"></div></div><div class="container" data-reactid="1197"><pre class="gutter" data-reactid="1198"><code class="punctuation" data-reactid="1199"><a href="the absolute1" data-reactid="1200"><div data-reactid="1201">1</div></a><a href="the absolute2" data-reactid="1202"><div data-reactid="1203">2</div></a><a href="the absolute3" data-reactid="1204"><div data-reactid="1205">3</div></a><a href="the absolute4" data-reactid="1206"><div data-reactid="1207">4</div></a><a href="the absolute5" data-reactid="1208"><div data-reactid="1209">5</div></a></code></pre><div style="width:1px;" data-reactid="1210"></div><pre class="source" data-reactid="1211"><!-- react-text: 1212 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1213"><span class="macro clojure-core" data-reactid="1214">defn</span></a><!-- react-text: 1215 --> <!-- /react-text --><!-- react-text: 1216 -->example<!-- /react-text --><!-- react-text: 1217 -->
  [<!-- /react-text --><!-- react-text: 1218 -->x<!-- /react-text --><!-- react-text: 1219 -->]
  <!-- /react-text --><span class="shead" data-reactid="1220"><span data-reactid="1221"><!-- react-text: 1222 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1223"><span class="clojure-core" data-reactid="1224">println</span></a><!-- react-text: 1225 --> <!-- /react-text --><span class="string" data-reactid="1226">&quot;hello!&quot;</span><!-- react-text: 1227 -->)<!-- /react-text --></span></span><!-- react-text: 1228 -->
  {<!-- /react-text --><span class="keyword" data-reactid="1229">:more</span><!-- react-text: 1230 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1231"><span class="clojure-core" data-reactid="1232">inc</span></a><!-- react-text: 1233 --> <!-- /react-text --><!-- react-text: 1234 -->x<!-- /react-text --><!-- react-text: 1235 -->)
   <!-- /react-text --><span class="keyword" data-reactid="1236">:less</span><!-- react-text: 1237 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1238"><span class="clojure-core" data-reactid="1239">dec</span></a><!-- react-text: 1240 --> <!-- /react-text --><!-- react-text: 1241 -->x<!-- /react-text --><!-- react-text: 1242 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1243"><div class="code-card" data-reactid="1244"><div class="code-card-heading" data-reactid="1245"><div class="code-card-heading-extra" data-reactid="1246"></div></div><div class="container" data-reactid="1247"><pre class="gutter" data-reactid="1248"><code class="punctuation" data-reactid="1249"><a href="worst hack1" data-reactid="1250"><div data-reactid="1251">1</div></a><a href="worst hack2" data-reactid="1252"><div data-reactid="1253">2</div></a><a href="worst hack3" data-reactid="1254"><div data-reactid="1255">3</div></a><a href="worst hack4" data-reactid="1256"><div data-reactid="1257">4</div></a><a href="worst hack5" data-reactid="1258"><div data-reactid="1259">5</div></a></code></pre><div style="width:1px;" data-reactid="1260"></div><pre class="source" data-reactid="1261"><!-- react-text: 1262 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1263"><span class="macro clojure-core" data-reactid="1264">defn</span></a><!-- react-text: 1265 --> <!-- /react-text --><!-- react-text: 1266 -->example<!-- /react-text --><!-- react-text: 1267 -->
  [<!-- /react-text --><!-- react-text: 1268 -->x<!-- /react-text --><!-- react-text: 1269 -->]
  (<!-- /react-text --><span class="added" data-reactid="1270">-&gt;</span><!-- react-text: 1271 --> <!-- /react-text --><span class="thead" data-reactid="1272"><span data-reactid="1273"><!-- react-text: 1274 -->{<!-- /react-text --><span class="keyword" data-reactid="1275">:more</span><!-- react-text: 1276 --> <!-- /react-text --><span data-reactid="1277"><!-- react-text: 1278 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1279"><span class="clojure-core" data-reactid="1280">inc</span></a><!-- react-text: 1281 --> <!-- /react-text --><!-- react-text: 1282 -->x<!-- /react-text --><!-- react-text: 1283 -->)<!-- /react-text --></span><!-- react-text: 1284 -->
<!-- /react-text --><!-- react-text: 1285 -->       <!-- /react-text --><span class="keyword" data-reactid="1286">:less</span><!-- react-text: 1287 --> <!-- /react-text --><span data-reactid="1288"><!-- react-text: 1289 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1290"><span class="clojure-core" data-reactid="1291">dec</span></a><!-- react-text: 1292 --> <!-- /react-text --><!-- react-text: 1293 -->x<!-- /react-text --><!-- react-text: 1294 -->)<!-- /react-text --></span><!-- react-text: 1295 -->}<!-- /react-text --></span></span><!-- react-text: 1296 -->
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1297"><span class="clojure-core" data-reactid="1298">assoc</span></a><!-- react-text: 1299 --> <!-- /react-text --><span class="keyword" data-reactid="1300">:twice</span><!-- react-text: 1301 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1302"><span class="clojure-core" data-reactid="1303">+</span></a><!-- react-text: 1304 --> <!-- /react-text --><!-- react-text: 1305 -->x<!-- /react-text --><!-- react-text: 1306 --> <!-- /react-text --><!-- react-text: 1307 -->x<!-- /react-text --><!-- react-text: 1308 -->))))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1309"></div></div><span class="caption" data-reactid="1310"><!-- react-text: 1311 -->Now, we enqueue #20, where we delete <!-- /react-text --><span class="fixed" data-reactid="1312">(println &quot;hello&quot;)</span><!-- react-text: 1313 -->:<!-- /react-text --></span><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1314"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1315"><div id="545237755" data-reactid="1316"><div class="filename-heading" data-reactid="1317"><span data-reactid="1318"><!-- react-text: 1319 -->#20 (popped best) -1,+1 cost 99/21 remain 63/78<!-- /react-text --><span data-reactid="1320"><!-- react-text: 1321 --> (<!-- /react-text --><!-- react-text: 1322 -->207faafb<!-- /react-text --><!-- react-text: 1323 --> from <!-- /react-text --><a href="#1987853169" data-reactid="1324">767c3b71</a><!-- react-text: 1325 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1326"><div class="diffpane" data-reactid="1327"><div class="code-card" data-reactid="1328"><div class="code-card-heading" data-reactid="1329"><div class="code-card-heading-extra" data-reactid="1330"></div></div><div class="container" data-reactid="1331"><pre class="gutter" data-reactid="1332"><code class="punctuation" data-reactid="1333"><a href="the absolute1" data-reactid="1334"><div data-reactid="1335">1</div></a><a href="the absolute2" data-reactid="1336"><div data-reactid="1337">2</div></a><a href="the absolute3" data-reactid="1338"><div data-reactid="1339">3</div></a><a href="the absolute4" data-reactid="1340"><div data-reactid="1341">4</div></a><a href="the absolute5" data-reactid="1342"><div data-reactid="1343">5</div></a></code></pre><div style="width:1px;" data-reactid="1344"></div><pre class="source" data-reactid="1345"><!-- react-text: 1346 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1347"><span class="macro clojure-core" data-reactid="1348">defn</span></a><!-- react-text: 1349 --> <!-- /react-text --><!-- react-text: 1350 -->example<!-- /react-text --><!-- react-text: 1351 -->
  [<!-- /react-text --><!-- react-text: 1352 -->x<!-- /react-text --><!-- react-text: 1353 -->]
  <!-- /react-text --><span class="deleted" data-reactid="1354"><span data-reactid="1355"><!-- react-text: 1356 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1357"><span class="clojure-core" data-reactid="1358">println</span></a><!-- react-text: 1359 --> <!-- /react-text --><span class="string" data-reactid="1360">&quot;hello!&quot;</span><!-- react-text: 1361 -->)<!-- /react-text --></span></span><!-- react-text: 1362 -->
  <!-- /react-text --><span class="shead" data-reactid="1363"><span data-reactid="1364"><!-- react-text: 1365 -->{<!-- /react-text --><span class="keyword" data-reactid="1366">:more</span><!-- react-text: 1367 --> <!-- /react-text --><span data-reactid="1368"><!-- react-text: 1369 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1370"><span class="clojure-core" data-reactid="1371">inc</span></a><!-- react-text: 1372 --> <!-- /react-text --><!-- react-text: 1373 -->x<!-- /react-text --><!-- react-text: 1374 -->)<!-- /react-text --></span><!-- react-text: 1375 -->
<!-- /react-text --><!-- react-text: 1376 -->   <!-- /react-text --><span class="keyword" data-reactid="1377">:less</span><!-- react-text: 1378 --> <!-- /react-text --><span data-reactid="1379"><!-- react-text: 1380 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1381"><span class="clojure-core" data-reactid="1382">dec</span></a><!-- react-text: 1383 --> <!-- /react-text --><!-- react-text: 1384 -->x<!-- /react-text --><!-- react-text: 1385 -->)<!-- /react-text --></span><!-- react-text: 1386 -->}<!-- /react-text --></span></span><!-- react-text: 1387 -->)<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1388"><div class="code-card" data-reactid="1389"><div class="code-card-heading" data-reactid="1390"><div class="code-card-heading-extra" data-reactid="1391"></div></div><div class="container" data-reactid="1392"><pre class="gutter" data-reactid="1393"><code class="punctuation" data-reactid="1394"><a href="worst hack1" data-reactid="1395"><div data-reactid="1396">1</div></a><a href="worst hack2" data-reactid="1397"><div data-reactid="1398">2</div></a><a href="worst hack3" data-reactid="1399"><div data-reactid="1400">3</div></a><a href="worst hack4" data-reactid="1401"><div data-reactid="1402">4</div></a><a href="worst hack5" data-reactid="1403"><div data-reactid="1404">5</div></a></code></pre><div style="width:1px;" data-reactid="1405"></div><pre class="source" data-reactid="1406"><!-- react-text: 1407 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1408"><span class="macro clojure-core" data-reactid="1409">defn</span></a><!-- react-text: 1410 --> <!-- /react-text --><!-- react-text: 1411 -->example<!-- /react-text --><!-- react-text: 1412 -->
  [<!-- /react-text --><!-- react-text: 1413 -->x<!-- /react-text --><!-- react-text: 1414 -->]
  (<!-- /react-text --><span class="added" data-reactid="1415">-&gt;</span><!-- react-text: 1416 --> <!-- /react-text --><span class="thead" data-reactid="1417"><span data-reactid="1418"><!-- react-text: 1419 -->{<!-- /react-text --><span class="keyword" data-reactid="1420">:more</span><!-- react-text: 1421 --> <!-- /react-text --><span data-reactid="1422"><!-- react-text: 1423 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1424"><span class="clojure-core" data-reactid="1425">inc</span></a><!-- react-text: 1426 --> <!-- /react-text --><!-- react-text: 1427 -->x<!-- /react-text --><!-- react-text: 1428 -->)<!-- /react-text --></span><!-- react-text: 1429 -->
<!-- /react-text --><!-- react-text: 1430 -->       <!-- /react-text --><span class="keyword" data-reactid="1431">:less</span><!-- react-text: 1432 --> <!-- /react-text --><span data-reactid="1433"><!-- react-text: 1434 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1435"><span class="clojure-core" data-reactid="1436">dec</span></a><!-- react-text: 1437 --> <!-- /react-text --><!-- react-text: 1438 -->x<!-- /react-text --><!-- react-text: 1439 -->)<!-- /react-text --></span><!-- react-text: 1440 -->}<!-- /react-text --></span></span><!-- react-text: 1441 -->
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1442"><span class="clojure-core" data-reactid="1443">assoc</span></a><!-- react-text: 1444 --> <!-- /react-text --><span class="keyword" data-reactid="1445">:twice</span><!-- react-text: 1446 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1447"><span class="clojure-core" data-reactid="1448">+</span></a><!-- react-text: 1449 --> <!-- /react-text --><!-- react-text: 1450 -->x<!-- /react-text --><!-- react-text: 1451 --> <!-- /react-text --><!-- react-text: 1452 -->x<!-- /react-text --><!-- react-text: 1453 -->))))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1454"></div></div><span class="caption" data-reactid="1455"><!-- react-text: 1456 -->It turns out that since deleting <!-- /react-text --><span class="fixed" data-reactid="1457">(println &quot;hello&quot;)</span><!-- react-text: 1458 --> has a relatively high cost, <!-- /react-text --><!-- react-text: 1459 -->  we go through a bunch of other states before we finally pop #20.  <!-- /react-text --><br data-reactid="1460"/><!-- react-text: 1461 -->But once we do, we can match the identical subtrees and get to here:<!-- /react-text --></span><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1462"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1463"><div id="2796865" data-reactid="1464"><div class="filename-heading" data-reactid="1465"><span data-reactid="1466"><!-- react-text: 1467 -->#85 (popped best) -1,+1 cost 81/21 remain 45/60 (nil S)<!-- /react-text --><span data-reactid="1468"><!-- react-text: 1469 --> (<!-- /react-text --><!-- react-text: 1470 -->2aad41<!-- /react-text --><!-- react-text: 1471 --> from <!-- /react-text --><a href="#545237755" data-reactid="1472">207faafb</a><!-- react-text: 1473 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1474"><div class="diffpane" data-reactid="1475"><div class="code-card" data-reactid="1476"><div class="code-card-heading" data-reactid="1477"><div class="code-card-heading-extra" data-reactid="1478"></div></div><div class="container" data-reactid="1479"><pre class="gutter" data-reactid="1480"><code class="punctuation" data-reactid="1481"><a href="the absolute1" data-reactid="1482"><div data-reactid="1483">1</div></a><a href="the absolute2" data-reactid="1484"><div data-reactid="1485">2</div></a><a href="the absolute3" data-reactid="1486"><div data-reactid="1487">3</div></a><a href="the absolute4" data-reactid="1488"><div data-reactid="1489">4</div></a><a href="the absolute5" data-reactid="1490"><div data-reactid="1491">5</div></a></code></pre><div style="width:1px;" data-reactid="1492"></div><pre class="source" data-reactid="1493"><!-- react-text: 1494 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1495"><span class="macro clojure-core" data-reactid="1496">defn</span></a><!-- react-text: 1497 --> <!-- /react-text --><!-- react-text: 1498 -->example<!-- /react-text --><!-- react-text: 1499 -->
  [<!-- /react-text --><!-- react-text: 1500 -->x<!-- /react-text --><!-- react-text: 1501 -->]
  <!-- /react-text --><span class="deleted" data-reactid="1502"><span data-reactid="1503"><!-- react-text: 1504 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1505"><span class="clojure-core" data-reactid="1506">println</span></a><!-- react-text: 1507 --> <!-- /react-text --><span class="string" data-reactid="1508">&quot;hello!&quot;</span><!-- react-text: 1509 -->)<!-- /react-text --></span></span><!-- react-text: 1510 -->
  {<!-- /react-text --><span class="keyword" data-reactid="1511">:more</span><!-- react-text: 1512 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1513"><span class="clojure-core" data-reactid="1514">inc</span></a><!-- react-text: 1515 --> <!-- /react-text --><!-- react-text: 1516 -->x<!-- /react-text --><!-- react-text: 1517 -->)
   <!-- /react-text --><span class="keyword" data-reactid="1518">:less</span><!-- react-text: 1519 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1520"><span class="clojure-core" data-reactid="1521">dec</span></a><!-- react-text: 1522 --> <!-- /react-text --><!-- react-text: 1523 -->x<!-- /react-text --><!-- react-text: 1524 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1525"><div class="code-card" data-reactid="1526"><div class="code-card-heading" data-reactid="1527"><div class="code-card-heading-extra" data-reactid="1528"></div></div><div class="container" data-reactid="1529"><pre class="gutter" data-reactid="1530"><code class="punctuation" data-reactid="1531"><a href="worst hack1" data-reactid="1532"><div data-reactid="1533">1</div></a><a href="worst hack2" data-reactid="1534"><div data-reactid="1535">2</div></a><a href="worst hack3" data-reactid="1536"><div data-reactid="1537">3</div></a><a href="worst hack4" data-reactid="1538"><div data-reactid="1539">4</div></a><a href="worst hack5" data-reactid="1540"><div data-reactid="1541">5</div></a></code></pre><div style="width:1px;" data-reactid="1542"></div><pre class="source" data-reactid="1543"><!-- react-text: 1544 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1545"><span class="macro clojure-core" data-reactid="1546">defn</span></a><!-- react-text: 1547 --> <!-- /react-text --><!-- react-text: 1548 -->example<!-- /react-text --><!-- react-text: 1549 -->
  [<!-- /react-text --><!-- react-text: 1550 -->x<!-- /react-text --><!-- react-text: 1551 -->]
  (<!-- /react-text --><span class="added" data-reactid="1552">-&gt;</span><!-- react-text: 1553 --> {<!-- /react-text --><span class="keyword" data-reactid="1554">:more</span><!-- react-text: 1555 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1556"><span class="clojure-core" data-reactid="1557">inc</span></a><!-- react-text: 1558 --> <!-- /react-text --><!-- react-text: 1559 -->x<!-- /react-text --><!-- react-text: 1560 -->)
       <!-- /react-text --><span class="keyword" data-reactid="1561">:less</span><!-- react-text: 1562 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1563"><span class="clojure-core" data-reactid="1564">dec</span></a><!-- react-text: 1565 --> <!-- /react-text --><!-- react-text: 1566 -->x<!-- /react-text --><!-- react-text: 1567 -->)}
      <!-- /react-text --><span class="thead" data-reactid="1568"><span data-reactid="1569"><!-- react-text: 1570 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1571"><span class="clojure-core" data-reactid="1572">assoc</span></a><!-- react-text: 1573 --> <!-- /react-text --><span class="keyword" data-reactid="1574">:twice</span><!-- react-text: 1575 --> <!-- /react-text --><span data-reactid="1576"><!-- react-text: 1577 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1578"><span class="clojure-core" data-reactid="1579">+</span></a><!-- react-text: 1580 --> <!-- /react-text --><!-- react-text: 1581 -->x<!-- /react-text --><!-- react-text: 1582 --> <!-- /react-text --><!-- react-text: 1583 -->x<!-- /react-text --><!-- react-text: 1584 -->)<!-- /react-text --></span><!-- react-text: 1585 -->)<!-- /react-text --></span></span><!-- react-text: 1586 -->))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1587"></div></div><span class="caption" data-reactid="1588"><!-- react-text: 1589 -->Here we are at the end of the source list (the defn body), <!-- /react-text --><!-- react-text: 1590 -->so no cursor is drawn and it says (nil S) in the header.  <!-- /react-text --><!-- react-text: 1591 -->From here we delete <!-- /react-text --><span class="fixed" data-reactid="1592">(assoc :twice (+ x x))</span><!-- react-text: 1593 -->:<!-- /react-text --></span><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1594"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1595"><div id="1387184197" data-reactid="1596"><div class="filename-heading" data-reactid="1597"><span data-reactid="1598"><!-- react-text: 1599 -->#86 (popped best) -1,+2 cost 82/36 remain 45/46 (nil S) (nil T)<!-- /react-text --><span data-reactid="1600"><!-- react-text: 1601 --> (<!-- /react-text --><!-- react-text: 1602 -->52aec045<!-- /react-text --><!-- react-text: 1603 --> from <!-- /react-text --><a href="#2796865" data-reactid="1604">2aad41</a><!-- react-text: 1605 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1606"><div class="diffpane" data-reactid="1607"><div class="code-card" data-reactid="1608"><div class="code-card-heading" data-reactid="1609"><div class="code-card-heading-extra" data-reactid="1610"></div></div><div class="container" data-reactid="1611"><pre class="gutter" data-reactid="1612"><code class="punctuation" data-reactid="1613"><a href="the absolute1" data-reactid="1614"><div data-reactid="1615">1</div></a><a href="the absolute2" data-reactid="1616"><div data-reactid="1617">2</div></a><a href="the absolute3" data-reactid="1618"><div data-reactid="1619">3</div></a><a href="the absolute4" data-reactid="1620"><div data-reactid="1621">4</div></a><a href="the absolute5" data-reactid="1622"><div data-reactid="1623">5</div></a></code></pre><div style="width:1px;" data-reactid="1624"></div><pre class="source" data-reactid="1625"><!-- react-text: 1626 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1627"><span class="macro clojure-core" data-reactid="1628">defn</span></a><!-- react-text: 1629 --> <!-- /react-text --><!-- react-text: 1630 -->example<!-- /react-text --><!-- react-text: 1631 -->
  [<!-- /react-text --><!-- react-text: 1632 -->x<!-- /react-text --><!-- react-text: 1633 -->]
  <!-- /react-text --><span class="deleted" data-reactid="1634"><span data-reactid="1635"><!-- react-text: 1636 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1637"><span class="clojure-core" data-reactid="1638">println</span></a><!-- react-text: 1639 --> <!-- /react-text --><span class="string" data-reactid="1640">&quot;hello!&quot;</span><!-- react-text: 1641 -->)<!-- /react-text --></span></span><!-- react-text: 1642 -->
  {<!-- /react-text --><span class="keyword" data-reactid="1643">:more</span><!-- react-text: 1644 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1645"><span class="clojure-core" data-reactid="1646">inc</span></a><!-- react-text: 1647 --> <!-- /react-text --><!-- react-text: 1648 -->x<!-- /react-text --><!-- react-text: 1649 -->)
   <!-- /react-text --><span class="keyword" data-reactid="1650">:less</span><!-- react-text: 1651 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1652"><span class="clojure-core" data-reactid="1653">dec</span></a><!-- react-text: 1654 --> <!-- /react-text --><!-- react-text: 1655 -->x<!-- /react-text --><!-- react-text: 1656 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1657"><div class="code-card" data-reactid="1658"><div class="code-card-heading" data-reactid="1659"><div class="code-card-heading-extra" data-reactid="1660"></div></div><div class="container" data-reactid="1661"><pre class="gutter" data-reactid="1662"><code class="punctuation" data-reactid="1663"><a href="worst hack1" data-reactid="1664"><div data-reactid="1665">1</div></a><a href="worst hack2" data-reactid="1666"><div data-reactid="1667">2</div></a><a href="worst hack3" data-reactid="1668"><div data-reactid="1669">3</div></a><a href="worst hack4" data-reactid="1670"><div data-reactid="1671">4</div></a><a href="worst hack5" data-reactid="1672"><div data-reactid="1673">5</div></a></code></pre><div style="width:1px;" data-reactid="1674"></div><pre class="source" data-reactid="1675"><!-- react-text: 1676 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1677"><span class="macro clojure-core" data-reactid="1678">defn</span></a><!-- react-text: 1679 --> <!-- /react-text --><!-- react-text: 1680 -->example<!-- /react-text --><!-- react-text: 1681 -->
  [<!-- /react-text --><!-- react-text: 1682 -->x<!-- /react-text --><!-- react-text: 1683 -->]
  (<!-- /react-text --><span class="added" data-reactid="1684">-&gt;</span><!-- react-text: 1685 --> {<!-- /react-text --><span class="keyword" data-reactid="1686">:more</span><!-- react-text: 1687 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1688"><span class="clojure-core" data-reactid="1689">inc</span></a><!-- react-text: 1690 --> <!-- /react-text --><!-- react-text: 1691 -->x<!-- /react-text --><!-- react-text: 1692 -->)
       <!-- /react-text --><span class="keyword" data-reactid="1693">:less</span><!-- react-text: 1694 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1695"><span class="clojure-core" data-reactid="1696">dec</span></a><!-- react-text: 1697 --> <!-- /react-text --><!-- react-text: 1698 -->x<!-- /react-text --><!-- react-text: 1699 -->)}
      <!-- /react-text --><span class="added" data-reactid="1700"><span data-reactid="1701"><!-- react-text: 1702 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1703"><span class="clojure-core" data-reactid="1704">assoc</span></a><!-- react-text: 1705 --> <!-- /react-text --><span class="keyword" data-reactid="1706">:twice</span><!-- react-text: 1707 --> <!-- /react-text --><span data-reactid="1708"><!-- react-text: 1709 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1710"><span class="clojure-core" data-reactid="1711">+</span></a><!-- react-text: 1712 --> <!-- /react-text --><!-- react-text: 1713 -->x<!-- /react-text --><!-- react-text: 1714 --> <!-- /react-text --><!-- react-text: 1715 -->x<!-- /react-text --><!-- react-text: 1716 -->)<!-- /react-text --></span><!-- react-text: 1717 -->)<!-- /react-text --></span></span><!-- react-text: 1718 -->))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1719"></div></div><span class="caption" data-reactid="1720"><!-- react-text: 1721 -->Now we have the completed diff, and we have (nil S) and (nil T), <!-- /react-text --><!-- react-text: 1722 -->so all we need to do is pop out of the defn body and we&#x27;re done!<!-- /react-text --></span><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1723"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1724"><div id="98179172" data-reactid="1725"><div class="filename-heading" data-reactid="1726"><span data-reactid="1727"><!-- react-text: 1728 -->#88 goal! (popped best) -1,+2 cost 82/36 remain 45/46 (nil S) (nil T)<!-- /react-text --><span data-reactid="1729"><!-- react-text: 1730 --> (<!-- /react-text --><!-- react-text: 1731 -->5da1864<!-- /react-text --><!-- react-text: 1732 --> from <!-- /react-text --><a href="#1387184197" data-reactid="1733">52aec045</a><!-- react-text: 1734 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1735"><div class="diffpane" data-reactid="1736"><div class="code-card" data-reactid="1737"><div class="code-card-heading" data-reactid="1738"><div class="code-card-heading-extra" data-reactid="1739"></div></div><div class="container" data-reactid="1740"><pre class="gutter" data-reactid="1741"><code class="punctuation" data-reactid="1742"><a href="the absolute1" data-reactid="1743"><div data-reactid="1744">1</div></a><a href="the absolute2" data-reactid="1745"><div data-reactid="1746">2</div></a><a href="the absolute3" data-reactid="1747"><div data-reactid="1748">3</div></a><a href="the absolute4" data-reactid="1749"><div data-reactid="1750">4</div></a><a href="the absolute5" data-reactid="1751"><div data-reactid="1752">5</div></a></code></pre><div style="width:1px;" data-reactid="1753"></div><pre class="source" data-reactid="1754"><!-- react-text: 1755 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1756"><span class="macro clojure-core" data-reactid="1757">defn</span></a><!-- react-text: 1758 --> <!-- /react-text --><!-- react-text: 1759 -->example<!-- /react-text --><!-- react-text: 1760 -->
  [<!-- /react-text --><!-- react-text: 1761 -->x<!-- /react-text --><!-- react-text: 1762 -->]
  <!-- /react-text --><span class="deleted" data-reactid="1763"><span data-reactid="1764"><!-- react-text: 1765 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1766"><span class="clojure-core" data-reactid="1767">println</span></a><!-- react-text: 1768 --> <!-- /react-text --><span class="string" data-reactid="1769">&quot;hello!&quot;</span><!-- react-text: 1770 -->)<!-- /react-text --></span></span><!-- react-text: 1771 -->
  {<!-- /react-text --><span class="keyword" data-reactid="1772">:more</span><!-- react-text: 1773 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1774"><span class="clojure-core" data-reactid="1775">inc</span></a><!-- react-text: 1776 --> <!-- /react-text --><!-- react-text: 1777 -->x<!-- /react-text --><!-- react-text: 1778 -->)
   <!-- /react-text --><span class="keyword" data-reactid="1779">:less</span><!-- react-text: 1780 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1781"><span class="clojure-core" data-reactid="1782">dec</span></a><!-- react-text: 1783 --> <!-- /react-text --><!-- react-text: 1784 -->x<!-- /react-text --><!-- react-text: 1785 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1786"><div class="code-card" data-reactid="1787"><div class="code-card-heading" data-reactid="1788"><div class="code-card-heading-extra" data-reactid="1789"></div></div><div class="container" data-reactid="1790"><pre class="gutter" data-reactid="1791"><code class="punctuation" data-reactid="1792"><a href="worst hack1" data-reactid="1793"><div data-reactid="1794">1</div></a><a href="worst hack2" data-reactid="1795"><div data-reactid="1796">2</div></a><a href="worst hack3" data-reactid="1797"><div data-reactid="1798">3</div></a><a href="worst hack4" data-reactid="1799"><div data-reactid="1800">4</div></a><a href="worst hack5" data-reactid="1801"><div data-reactid="1802">5</div></a></code></pre><div style="width:1px;" data-reactid="1803"></div><pre class="source" data-reactid="1804"><!-- react-text: 1805 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1806"><span class="macro clojure-core" data-reactid="1807">defn</span></a><!-- react-text: 1808 --> <!-- /react-text --><!-- react-text: 1809 -->example<!-- /react-text --><!-- react-text: 1810 -->
  [<!-- /react-text --><!-- react-text: 1811 -->x<!-- /react-text --><!-- react-text: 1812 -->]
  (<!-- /react-text --><span class="added" data-reactid="1813">-&gt;</span><!-- react-text: 1814 --> {<!-- /react-text --><span class="keyword" data-reactid="1815">:more</span><!-- react-text: 1816 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1817"><span class="clojure-core" data-reactid="1818">inc</span></a><!-- react-text: 1819 --> <!-- /react-text --><!-- react-text: 1820 -->x<!-- /react-text --><!-- react-text: 1821 -->)
       <!-- /react-text --><span class="keyword" data-reactid="1822">:less</span><!-- react-text: 1823 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1824"><span class="clojure-core" data-reactid="1825">dec</span></a><!-- react-text: 1826 --> <!-- /react-text --><!-- react-text: 1827 -->x<!-- /react-text --><!-- react-text: 1828 -->)}
      <!-- /react-text --><span class="added" data-reactid="1829"><span data-reactid="1830"><!-- react-text: 1831 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1832"><span class="clojure-core" data-reactid="1833">assoc</span></a><!-- react-text: 1834 --> <!-- /react-text --><span class="keyword" data-reactid="1835">:twice</span><!-- react-text: 1836 --> <!-- /react-text --><span data-reactid="1837"><!-- react-text: 1838 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1839"><span class="clojure-core" data-reactid="1840">+</span></a><!-- react-text: 1841 --> <!-- /react-text --><!-- react-text: 1842 -->x<!-- /react-text --><!-- react-text: 1843 --> <!-- /react-text --><!-- react-text: 1844 -->x<!-- /react-text --><!-- react-text: 1845 -->)<!-- /react-text --></span><!-- react-text: 1846 -->)<!-- /react-text --></span></span><!-- react-text: 1847 -->))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1848"></div></div></div></p></div></div></body></html>