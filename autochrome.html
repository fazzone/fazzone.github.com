<!DOCTYPE html>
<html><head><title>Autochrome - Structural diffs for Clojure source code</title><style>body {
  background: #000000;
  font-family: "Iosevka Term", "Fira Code", Inconsolata, Menlo, Monaco, Consolas, monospace;
  font-size: 16px;
}

a {
  text-decoration: none;
  font-weight: bolder;
}

code, pre {
  line-height: 1.24;
  font-family: "Iosevka Term", "Fira Code", Inconsolata, Menlo, Monaco, Consolas, monospace;
  word-break: normal;
  white-space: pre;
  word-spacing: normal;
  word-wrap: normal;
  background: #000000;
  color: #ffffff;
  hyphens: none;
}

code, a {
  text-decoration: none;
  font-weight: bolder;
  color: inherit;
}

pre {
  margin: 0px;
  overflow: auto;
  border-radius: 0.3em;
  font-weight: normal;
  overflow-y: hidden;
}

.gutter {
  text-align: right;
  padding-right: 4px;
  padding-left: 2px;
}

.code-card {
  margin-buttom: 16px;
  padding: 6px 6px 0px 6px;
  color: #ae81ff;
  font-weight: bold;
}

.code-card-heading {
  background: linear-gradient(#632697, #000);
  font-size: 22px;
  display: flex;
  justify-content: space-between;
}

.filename-heading {
  background: linear-gradient(#632697, #000);
  font-size: 22px;
  color: white;
}

.spacer {
  margin-bottom: 30px;
}

.code-card-heading-extra {
  display: flex;
}

.container {
  display: flex;
  flex-direction: row;
}

.usages {
  font-size: 16px;
  margin: auto;
}

.top-comment {
  margin-bottom: 17px;
}

.ns-ref {
  color: #f0c674;
}

.keyword {
  color: #8abeb7;
}

.var-ref {
  color: #81a2be;
}

.clojure-core {
  font-weight: bolder;
  color: #81a2be;
}

.macro {
  color: #b294bb;
}

.punctuation {
  color: #a6a6a0;
}

.ns-ref {
  color: #f0c674;
}

.string {
  color: #b5bd68;
}

.keyword {
  color: #70c0b1;
}

.java-class {
  color: #de9f25;
}

.punctuation {
  color: #a6a6a0;
}

.highlight {
  background-color: #5d007a;
}

.unparsed {
  background-color: #ff0000;
}

.added {
  background-color: #225d2d;
}

.deleted {
  background-color: #660b0b;
}

.first-seen {
  text-decoration: underline;
}

.comment {
  color: #969896;
  font-style: italic;
  font-weight: normal;
}

.diffpane {
  width: 50%;
}

.shead {
  background-color: #1224b1;
  border-radius: 10px;
}

.thead {
  background-color: #5d007a;
  border-radius: 10px;
}</style><style>p, li, .caption {
  font-family: sans-serif;
  text-align: left;
  font-size: 18px;
}

.caption {
  width: 56em;
}

p {
  text-indent: 2em;
}

.diffpane {
  width: unset;
}

.textcontainer {
  width: 50%;
  color: white;
}

.title {
  font-size: 32px;
}

.sectiontitle {
  font-size: 24px;
  text-decoration: underline;
}

.insetcontainer {
  display: flex;
}

.insetcenter {
  display: flex;
  justify-content: center;
}

.inset {
  border: 2px solid;
  border-color: #969896;
  padding: 10px;
  display: flex;
  margin: 10px auto;
}

.fixed {
  font-family: monospace;
  background-color: #111;
}</style></head><body><div data-reactroot="" data-reactid="1" data-react-checksum="654495411"><div class="filename-heading" data-reactid="2"><div class="title" data-reactid="3">Autochrome - Structural diffs for Clojure source code</div></div><div class="textcontainer" style="margin:auto;" data-reactid="4"><div style="margin-top:35px;" data-reactid="5"><div class="insetcenter" data-reactid="6"><div class="inset" data-reactid="7"><div style="display:flex;flex-direction:row;" data-reactid="8"><div class="diffpane" data-reactid="9"><div class="code-card" data-reactid="10"><div class="code-card-heading" data-reactid="11"><div class="code-card-heading-extra" data-reactid="12"></div></div><div class="container" data-reactid="13"><pre class="gutter" data-reactid="14"><code class="punctuation" data-reactid="15"><a href="the absolute1" data-reactid="16"><div data-reactid="17">1</div></a><a href="the absolute2" data-reactid="18"><div data-reactid="19">2</div></a><a href="the absolute3" data-reactid="20"><div data-reactid="21">3</div></a><a href="the absolute4" data-reactid="22"><div data-reactid="23">4</div></a><a href="the absolute5" data-reactid="24"><div data-reactid="25">5</div></a></code></pre><div style="width:1px;" data-reactid="26"></div><pre class="source" data-reactid="27"><!-- react-text: 28 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="29"><span class="macro clojure-core" data-reactid="30">defn</span></a><!-- react-text: 31 --> <!-- /react-text --><!-- react-text: 32 -->example<!-- /react-text --><!-- react-text: 33 -->
  [<!-- /react-text --><!-- react-text: 34 -->x<!-- /react-text --><!-- react-text: 35 -->]
  <!-- /react-text --><span class="deleted" data-reactid="36"><span data-reactid="37"><!-- react-text: 38 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="39"><span class="clojure-core" data-reactid="40">println</span></a><!-- react-text: 41 --> <!-- /react-text --><span class="string" data-reactid="42">&quot;hello!&quot;</span><!-- react-text: 43 -->)<!-- /react-text --></span></span><!-- react-text: 44 -->
  {<!-- /react-text --><span class="keyword" data-reactid="45">:more</span><!-- react-text: 46 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="47"><span class="clojure-core" data-reactid="48">inc</span></a><!-- react-text: 49 --> <!-- /react-text --><!-- react-text: 50 -->x<!-- /react-text --><!-- react-text: 51 -->)
   <!-- /react-text --><span class="keyword" data-reactid="52">:less</span><!-- react-text: 53 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="54"><span class="clojure-core" data-reactid="55">dec</span></a><!-- react-text: 56 --> <!-- /react-text --><!-- react-text: 57 -->x<!-- /react-text --><!-- react-text: 58 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="59"><div class="code-card" data-reactid="60"><div class="code-card-heading" data-reactid="61"><div class="code-card-heading-extra" data-reactid="62"></div></div><div class="container" data-reactid="63"><pre class="gutter" data-reactid="64"><code class="punctuation" data-reactid="65"><a href="worst hack1" data-reactid="66"><div data-reactid="67">1</div></a><a href="worst hack2" data-reactid="68"><div data-reactid="69">2</div></a><a href="worst hack3" data-reactid="70"><div data-reactid="71">3</div></a><a href="worst hack4" data-reactid="72"><div data-reactid="73">4</div></a><a href="worst hack5" data-reactid="74"><div data-reactid="75">5</div></a></code></pre><div style="width:1px;" data-reactid="76"></div><pre class="source" data-reactid="77"><!-- react-text: 78 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="79"><span class="macro clojure-core" data-reactid="80">defn</span></a><!-- react-text: 81 --> <!-- /react-text --><!-- react-text: 82 -->example<!-- /react-text --><!-- react-text: 83 -->
  [<!-- /react-text --><!-- react-text: 84 -->x<!-- /react-text --><!-- react-text: 85 -->]
  (<!-- /react-text --><span class="added" data-reactid="86">-&gt;</span><!-- react-text: 87 --> {<!-- /react-text --><span class="keyword" data-reactid="88">:more</span><!-- react-text: 89 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="90"><span class="clojure-core" data-reactid="91">inc</span></a><!-- react-text: 92 --> <!-- /react-text --><!-- react-text: 93 -->x<!-- /react-text --><!-- react-text: 94 -->)
       <!-- /react-text --><span class="keyword" data-reactid="95">:less</span><!-- react-text: 96 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="97"><span class="clojure-core" data-reactid="98">dec</span></a><!-- react-text: 99 --> <!-- /react-text --><!-- react-text: 100 -->x<!-- /react-text --><!-- react-text: 101 -->)}
      <!-- /react-text --><span class="added" data-reactid="102"><span data-reactid="103"><!-- react-text: 104 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="105"><span class="clojure-core" data-reactid="106">assoc</span></a><!-- react-text: 107 --> <!-- /react-text --><span class="keyword" data-reactid="108">:twice</span><!-- react-text: 109 --> <!-- /react-text --><span data-reactid="110"><!-- react-text: 111 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="112"><span class="clojure-core" data-reactid="113">+</span></a><!-- react-text: 114 --> <!-- /react-text --><!-- react-text: 115 -->x<!-- /react-text --><!-- react-text: 116 --> <!-- /react-text --><!-- react-text: 117 -->x<!-- /react-text --><!-- react-text: 118 -->)<!-- /react-text --></span><!-- react-text: 119 -->)<!-- /react-text --></span></span><!-- react-text: 120 -->))<!-- /react-text --></pre></div></div></div></div></div></div></div><p data-reactid="121"><div data-reactid="122"><div class="sectiontitle" data-reactid="123">Abstract</div><p data-reactid="124"><a href="https://github.com/ladderlife/autochrome" data-reactid="125">Autochrome</a><!-- react-text: 126 --> uses a full parse to highlight and structurally diff Clojure source code.  <!-- /react-text --><!-- react-text: 127 -->It aims to make the experience of reviewing Clojure code just as nice as writing it.  <!-- /react-text --><!-- react-text: 128 -->It takes the form of a command-line tool which writes diffs as HTML to stdout: <!-- /react-text --></p><div class="insetcenter" data-reactid="129"><div class="inset" data-reactid="130"><pre data-reactid="131"><!-- react-text: 132 -->$ lein run &lt;owner&gt; &lt;repo&gt; &lt;pull-request-id&gt; <!-- /react-text --><span class="comment" data-reactid="133"> # generate diff for a GitHub pull request</span><!-- react-text: 134 -->
$ lein run &lt;old-tree&gt; &lt;new-tree&gt;<!-- /react-text --><span class="comment" data-reactid="135">             # like git diff, run it from your repo directory</span><!-- react-text: 136 -->
$ lein run -o ...<!-- /react-text --><span class="comment" data-reactid="137">                            # try to open the diff in a browser</span></pre></div></div><p data-reactid="138"><!-- react-text: 139 -->If generated from GitHub, the line numbers in Clojure diffs link back to the PR.  <!-- /react-text --><!-- react-text: 140 -->Bold symbols link to documentation.<!-- /react-text --></p></div><div data-reactid="141"><div class="sectiontitle" data-reactid="142">Features</div><p data-reactid="143"><ul data-reactid="144"><li data-reactid="145"><!-- react-text: 146 -->Scope-aware highlighting:<!-- /react-text --><div class="insetcontainer" data-reactid="147"><div class="inset" data-reactid="148"><div class="code-card" data-reactid="149"><div class="code-card-heading" data-reactid="150"><div class="code-card-heading-extra" data-reactid="151"></div></div><div class="container" data-reactid="152"><pre class="gutter" data-reactid="153"><code class="punctuation" data-reactid="154"><a href="more hacks1" data-reactid="155"><div data-reactid="156">1</div></a><a href="more hacks2" data-reactid="157"><div data-reactid="158">2</div></a><a href="more hacks3" data-reactid="159"><div data-reactid="160">3</div></a><a href="more hacks4" data-reactid="161"><div data-reactid="162">4</div></a></code></pre><div style="width:1px;" data-reactid="163"></div><pre class="source" data-reactid="164"><!-- react-text: 165 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/let" data-reactid="166"><span class="macro clojure-core" data-reactid="167">let</span></a><!-- react-text: 168 --> [<!-- /react-text --><!-- react-text: 169 -->keyword<!-- /react-text --><!-- react-text: 170 --> <!-- /react-text --><span class="keyword" data-reactid="171">:hello/world</span><!-- react-text: 172 -->
      <!-- /react-text --><!-- react-text: 173 -->name<!-- /react-text --><!-- react-text: 174 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/name" data-reactid="175"><span class="clojure-core" data-reactid="176">name</span></a><!-- react-text: 177 --> <!-- /react-text --><!-- react-text: 178 -->keyword<!-- /react-text --><!-- react-text: 179 -->)
      [<!-- /react-text --><!-- react-text: 180 -->a<!-- /react-text --><!-- react-text: 181 --> <!-- /react-text --><!-- react-text: 182 -->b<!-- /react-text --><!-- react-text: 183 --> <!-- /react-text --><span class="keyword" data-reactid="184">:as</span><!-- react-text: 185 --> <!-- /react-text --><!-- react-text: 186 -->vec<!-- /react-text --><!-- react-text: 187 -->] (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/map" data-reactid="188"><span class="clojure-core" data-reactid="189">map</span></a><!-- react-text: 190 --> <!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="191"><span class="clojure-core" data-reactid="192">inc</span></a><!-- react-text: 193 --> [<!-- /react-text --><!-- react-text: 194 -->1<!-- /react-text --><!-- react-text: 195 --> <!-- /react-text --><!-- react-text: 196 -->2<!-- /react-text --><!-- react-text: 197 --> <!-- /react-text --><!-- react-text: 198 -->3<!-- /react-text --><!-- react-text: 199 -->])]
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/str" data-reactid="200"><span class="clojure-core" data-reactid="201">str</span></a><!-- react-text: 202 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/namespace" data-reactid="203"><span class="clojure-core" data-reactid="204">namespace</span></a><!-- react-text: 205 --> <!-- /react-text --><!-- react-text: 206 -->keyword<!-- /react-text --><!-- react-text: 207 -->) <!-- /react-text --><!-- react-text: 208 -->name<!-- /react-text --><!-- react-text: 209 -->))<!-- /react-text --></pre></div></div></div><div style="width:100%;" data-reactid="210"></div></div></li><li data-reactid="211"><!-- react-text: 212 -->Structural diff which can cope with wrapping/stripping parens:<!-- /react-text --><div class="insetcontainer" data-reactid="213"><div class="inset" data-reactid="214"><div style="display:flex;flex-direction:row;" data-reactid="215"><div class="diffpane" data-reactid="216"><div class="code-card" data-reactid="217"><div class="code-card-heading" data-reactid="218"><div class="code-card-heading-extra" data-reactid="219"></div></div><div class="container" data-reactid="220"><pre class="gutter" data-reactid="221"><code class="punctuation" data-reactid="222"><a href="the absolute1" data-reactid="223"><div data-reactid="224">1</div></a><a href="the absolute2" data-reactid="225"><div data-reactid="226">2</div></a><a href="the absolute3" data-reactid="227"><div data-reactid="228">3</div></a><a href="the absolute4" data-reactid="229"><div data-reactid="230">4</div></a><a href="the absolute5" data-reactid="231"><div data-reactid="232">5</div></a><a href="the absolute6" data-reactid="233"><div data-reactid="234">6</div></a><a href="the absolute7" data-reactid="235"><div data-reactid="236">7</div></a></code></pre><div style="width:1px;" data-reactid="237"></div><pre class="source" data-reactid="238"><!-- react-text: 239 -->{<!-- /react-text --><span class="keyword" data-reactid="240">:a</span><!-- react-text: 241 --> <!-- /react-text --><span class="keyword" data-reactid="242">:really</span><!-- react-text: 243 -->
 <!-- /react-text --><span class="keyword" data-reactid="244">:big</span><!-- react-text: 245 --> <!-- /react-text --><span class="keyword" data-reactid="246">:thing</span><!-- react-text: 247 -->
 <!-- /react-text --><span class="deleted" data-reactid="248"><span class="keyword" data-reactid="249">:these</span></span><!-- react-text: 250 --> <!-- /react-text --><span class="deleted" data-reactid="251"><span class="keyword" data-reactid="252">:entries</span></span><!-- react-text: 253 -->
 <!-- /react-text --><span class="keyword" data-reactid="254">:which</span><!-- react-text: 255 --> <!-- /react-text --><span class="keyword" data-reactid="256">:is</span><!-- react-text: 257 -->
 <!-- /react-text --><span class="deleted" data-reactid="258"><span class="keyword" data-reactid="259">:were</span></span><!-- react-text: 260 --> <!-- /react-text --><span class="deleted" data-reactid="261"><span class="keyword" data-reactid="262">:removed</span></span><!-- react-text: 263 -->
 <!-- /react-text --><span class="keyword" data-reactid="264">:very</span><!-- react-text: 265 --> <!-- /react-text --><span class="keyword" data-reactid="266">:annoying</span><!-- react-text: 267 -->
 <!-- /react-text --><span class="keyword" data-reactid="268">:to</span><!-- react-text: 269 --> <!-- /react-text --><span class="keyword" data-reactid="270">:read</span><!-- react-text: 271 -->}<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="272"><div class="code-card" data-reactid="273"><div class="code-card-heading" data-reactid="274"><div class="code-card-heading-extra" data-reactid="275"></div></div><div class="container" data-reactid="276"><pre class="gutter" data-reactid="277"><code class="punctuation" data-reactid="278"><a href="worst hack1" data-reactid="279"><div data-reactid="280">1</div></a><a href="worst hack2" data-reactid="281"><div data-reactid="282">2</div></a><a href="worst hack3" data-reactid="283"><div data-reactid="284">3</div></a><a href="worst hack4" data-reactid="285"><div data-reactid="286">4</div></a><a href="worst hack5" data-reactid="287"><div data-reactid="288">5</div></a><a href="worst hack6" data-reactid="289"><div data-reactid="290">6</div></a><a href="worst hack7" data-reactid="291"><div data-reactid="292">7</div></a><a href="worst hack8" data-reactid="293"><div data-reactid="294">8</div></a></code></pre><div style="width:1px;" data-reactid="295"></div><pre class="source" data-reactid="296"><!-- react-text: 297 -->(<!-- /react-text --><span class="added" data-reactid="298">keys</span><!-- react-text: 299 -->
   (<!-- /react-text --><span class="added" data-reactid="300">merge</span><!-- react-text: 301 -->
    {<!-- /react-text --><span class="keyword" data-reactid="302">:a</span><!-- react-text: 303 --> <!-- /react-text --><span class="keyword" data-reactid="304">:really</span><!-- react-text: 305 -->
     <!-- /react-text --><span class="keyword" data-reactid="306">:big</span><!-- react-text: 307 --> <!-- /react-text --><span class="keyword" data-reactid="308">:thing</span><!-- react-text: 309 -->
     <!-- /react-text --><span class="keyword" data-reactid="310">:which</span><!-- react-text: 311 --> <!-- /react-text --><span class="keyword" data-reactid="312">:is</span><!-- react-text: 313 -->
     <!-- /react-text --><span class="keyword" data-reactid="314">:very</span><!-- react-text: 315 --> <!-- /react-text --><span class="keyword" data-reactid="316">:annoying</span><!-- react-text: 317 -->
     <!-- /react-text --><span class="keyword" data-reactid="318">:to</span><!-- react-text: 319 --> <!-- /react-text --><span class="keyword" data-reactid="320">:read</span><!-- react-text: 321 -->}
    <!-- /react-text --><span class="added" data-reactid="322"><span data-reactid="323"><!-- react-text: 324 -->{<!-- /react-text --><span class="keyword" data-reactid="325">:more</span><!-- react-text: 326 --> <!-- /react-text --><span class="keyword" data-reactid="327">:stuff</span><!-- react-text: 328 -->}<!-- /react-text --></span></span><!-- react-text: 329 -->))<!-- /react-text --></pre></div></div></div></div></div><div style="width:100%;" data-reactid="330"></div></div></li><li data-reactid="331"><!-- react-text: 332 -->Naturally, whitespace is ignored completely: (h/t <!-- /react-text --><a href="http://blog.klipse.tech/lambda/2016/08/07/pure-y-combinator-clojure.html" data-reactid="333">@viebel</a><!-- react-text: 334 -->)<!-- /react-text --><div class="insetcontainer" data-reactid="335"><div class="inset" data-reactid="336"><div style="display:flex;flex-direction:row;" data-reactid="337"><div class="diffpane" data-reactid="338"><div class="code-card" data-reactid="339"><div class="code-card-heading" data-reactid="340"><div class="code-card-heading-extra" data-reactid="341"></div></div><div class="container" data-reactid="342"><pre class="gutter" data-reactid="343"><code class="punctuation" data-reactid="344"><a href="the absolute1" data-reactid="345"><div data-reactid="346">1</div></a><a href="the absolute2" data-reactid="347"><div data-reactid="348">2</div></a></code></pre><div style="width:1px;" data-reactid="349"></div><pre class="source" data-reactid="350"><!-- react-text: 351 -->(<!-- /react-text --><a href="https://clojure.org/reference/special_forms#def" data-reactid="352"><span class="macro clojure-core" data-reactid="353">def</span></a><!-- react-text: 354 --> <!-- /react-text --><!-- react-text: 355 -->Y<!-- /react-text --><!-- react-text: 356 -->(<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="357"><span class="macro clojure-core" data-reactid="358">fn</span></a><!-- react-text: 359 -->[<!-- /react-text --><!-- react-text: 360 -->f<!-- /react-text --><!-- react-text: 361 -->]((<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="362"><span class="macro clojure-core" data-reactid="363">fn</span></a><!-- react-text: 364 -->[<!-- /react-text --><!-- react-text: 365 -->x<!-- /react-text --><!-- react-text: 366 -->](<!-- /react-text --><!-- react-text: 367 -->x<!-- /react-text --><!-- react-text: 368 -->,<!-- /react-text --><!-- react-text: 369 -->x<!-- /react-text --><!-- react-text: 370 -->))
(<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="371"><span class="macro clojure-core" data-reactid="372">fn</span></a><!-- react-text: 373 -->[<!-- /react-text --><!-- react-text: 374 -->x<!-- /react-text --><!-- react-text: 375 -->](<!-- /react-text --><!-- react-text: 376 -->f<!-- /react-text --><!-- react-text: 377 -->(<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="378"><span class="macro clojure-core" data-reactid="379">fn</span></a><!-- react-text: 380 -->[<!-- /react-text --><!-- react-text: 381 -->y<!-- /react-text --><!-- react-text: 382 -->]((<!-- /react-text --><!-- react-text: 383 -->x<!-- /react-text --><!-- react-text: 384 -->,<!-- /react-text --><!-- react-text: 385 -->x<!-- /react-text --><!-- react-text: 386 -->),<!-- /react-text --><!-- react-text: 387 -->y<!-- /react-text --><!-- react-text: 388 -->)))))))<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="389"><div class="code-card" data-reactid="390"><div class="code-card-heading" data-reactid="391"><div class="code-card-heading-extra" data-reactid="392"></div></div><div class="container" data-reactid="393"><pre class="gutter" data-reactid="394"><code class="punctuation" data-reactid="395"><a href="worst hack1" data-reactid="396"><div data-reactid="397">1</div></a><a href="worst hack2" data-reactid="398"><div data-reactid="399">2</div></a><a href="worst hack3" data-reactid="400"><div data-reactid="401">3</div></a><a href="worst hack4" data-reactid="402"><div data-reactid="403">4</div></a></code></pre><div style="width:1px;" data-reactid="404"></div><pre class="source" data-reactid="405"><!-- react-text: 406 -->(<!-- /react-text --><a href="https://clojure.org/reference/special_forms#def" data-reactid="407"><span class="macro clojure-core" data-reactid="408">def</span></a><!-- react-text: 409 --> <!-- /react-text --><!-- react-text: 410 -->Y<!-- /react-text --><!-- react-text: 411 -->
  (<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="412"><span class="macro clojure-core" data-reactid="413">fn</span></a><!-- react-text: 414 --> [<!-- /react-text --><!-- react-text: 415 -->f<!-- /react-text --><!-- react-text: 416 -->]
    ((<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="417"><span class="macro clojure-core" data-reactid="418">fn</span></a><!-- react-text: 419 --> [<!-- /react-text --><!-- react-text: 420 -->x<!-- /react-text --><!-- react-text: 421 -->] (<!-- /react-text --><!-- react-text: 422 -->x<!-- /react-text --><!-- react-text: 423 --> <!-- /react-text --><!-- react-text: 424 -->x<!-- /react-text --><!-- react-text: 425 -->))
     (<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="426"><span class="macro clojure-core" data-reactid="427">fn</span></a><!-- react-text: 428 --> [<!-- /react-text --><!-- react-text: 429 -->x<!-- /react-text --><!-- react-text: 430 -->] (<!-- /react-text --><!-- react-text: 431 -->f<!-- /react-text --><!-- react-text: 432 --> (<!-- /react-text --><a href="https://clojure.org/reference/special_forms#fn" data-reactid="433"><span class="macro clojure-core" data-reactid="434">fn</span></a><!-- react-text: 435 --> [<!-- /react-text --><!-- react-text: 436 -->y<!-- /react-text --><!-- react-text: 437 -->] ((<!-- /react-text --><!-- react-text: 438 -->x<!-- /react-text --><!-- react-text: 439 --> <!-- /react-text --><!-- react-text: 440 -->x<!-- /react-text --><!-- react-text: 441 -->) <!-- /react-text --><!-- react-text: 442 -->y<!-- /react-text --><!-- react-text: 443 -->)))))))<!-- /react-text --></pre></div></div></div></div></div><div style="width:100%;" data-reactid="444"></div></div></li></ul></p></div><div data-reactid="445"><div class="sectiontitle" data-reactid="446">Misfeatures</div><p data-reactid="447"><ul data-reactid="448"><li data-reactid="449">Symbols can only have one annotation.  </li><li data-reactid="450">Terrible for viewing non-clojure diffs.  </li><li data-reactid="451">Difficult to port to ClojureScript.  </li><li data-reactid="452">Uses its own custom clojure parser.</li><li data-reactid="453">Occasionally gets strange ideas.</li></ul></p></div><div data-reactid="454"><div class="sectiontitle" data-reactid="455">How it works</div><p data-reactid="456"><!-- react-text: 457 -->Structural diffing is something I always wanted for Clojure.  <!-- /react-text --><!-- react-text: 458 -->When I saw <!-- /react-text --><a href="http://thume.ca/2017/06/17/tree-diffing/" data-reactid="459">Tristan Hume&#x27;s article about tree diffing</a><!-- react-text: 460 -->, I was inspired to give it a shot myself using the same A* pathfinding technique he described.  <!-- /react-text --><!-- react-text: 461 -->In order to apply A* to the problem of tree diffing, you need to extend the concepts <!-- /react-text --><!-- react-text: 462 -->of location, cost, distance, and adjacency to tree diffs.  Location is clearly needed to know where you are, <!-- /react-text --><!-- react-text: 463 -->but in addition they need to be comparable, so you know not to bother when you already have a better <!-- /react-text --><!-- react-text: 464 -->path to the same place.  <!-- /react-text --><!-- react-text: 465 -->Cost is what makes some paths preferred over others.  For pathfinding on a road network, this would be <!-- /react-text --><!-- react-text: 466 -->the total distance traveled along the roads used.  By &#x27;distance&#x27; I really mean the A* heuristic, <!-- /react-text --><!-- react-text: 467 -->which in the case of roads might be the straight-line distance to the destination.  <!-- /react-text --><!-- react-text: 468 -->Adjacency is what states are reachable from a particular state.  For roads you might say that intersections are <!-- /react-text --><!-- react-text: 469 -->the nodes and adjacency means there is a road connecting them.  <!-- /react-text --><!-- react-text: 470 -->In autochrome:<!-- /react-text --><ul data-reactid="471"><li data-reactid="472"><!-- react-text: 473 -->Location is a pair of pointers into the source and target lists, <!-- /react-text --><!-- react-text: 474 -->plus the stack of previous locations.  Intuitively, the pointers represent a pair of <!-- /react-text --><!-- react-text: 475 -->&#x27;cursors&#x27; over the tree structure.  Without the stack of previous locations, <!-- /react-text --><!-- react-text: 476 -->comparison would break, since all locations at the end of two lists would be indistinguishable <!-- /react-text --><!-- react-text: 477 -->from the goal (the end of both root lists)<!-- /react-text --></li><li data-reactid="478"><!-- react-text: 479 -->Cost is the total size of all subtrees added and deleted, plus the number of subtree added and deleted.  <!-- /react-text --><!-- react-text: 480 -->Subtree size is 1 for empty collections, character count for text nodes, and sum size of children for branch nodes.  <!-- /react-text --><!-- react-text: 481 -->The number of subtrees changed is included in the cost so that the algorithm prefers deleting/adding entire<!-- /react-text --><!-- react-text: 482 -->lists, rather than all their elements (since they have the same cost otherwise).<!-- /react-text --></li><li data-reactid="483"><!-- react-text: 484 -->Distance is the maximum of the &quot;remaining&quot; tree sizes for the source and target tree.  <!-- /react-text --><!-- react-text: 485 -->Whenever a subtree is accounted for by being added, deleted, or matched with an identical subtree, <!-- /react-text --><!-- react-text: 486 -->its size is subtracted from the remaining size.<!-- /react-text --></li><li data-reactid="487"><!-- react-text: 488 -->Adjacency is a bit complicated:<!-- /react-text --><ul data-reactid="489"><li data-reactid="490">When the source and target cursors are over identical subtrees, we always advance both cursors.</li><li data-reactid="491"><!-- react-text: 492 -->When the source cursor is not at the end of its list, we may advance it while keeping the same <!-- /react-text --><!-- react-text: 493 -->target cursor.  This corresponds to deleting a subtree from the source list.<!-- /react-text --></li><li data-reactid="494">Likewise for the target cursor: we advance it and keep the source cursor, corresponding to a subtree addition.</li><li data-reactid="495"><!-- react-text: 496 -->When both cursors are over matching collection types, we can move both cursors into the lists.  <!-- /react-text --><!-- react-text: 497 -->We also need to push the next location onto the stack.<!-- /react-text --></li><li data-reactid="498"><!-- react-text: 499 -->When both cursors are nil, it means we have reached the end of both lists, and we need to <!-- /react-text --><!-- react-text: 500 -->pop the next location in the parent sequences off the stack.<!-- /react-text --></li></ul><p data-reactid="501"><!-- react-text: 502 -->This is the basic version of adjacency that I started with.  However, when implemented this way, <!-- /react-text --><!-- react-text: 503 -->the algorithm cannot match subtrees at different levels of nesting, since the cursors always move<!-- /react-text --><!-- react-text: 504 -->up or down together.  <!-- /react-text --><!-- react-text: 505 -->To handle changes in nesting, the cursors need to be allowed to move up and down independently, <!-- /react-text --><!-- react-text: 506 -->like they are allowed to do within lists.  This means that instead of one stack of pairs of pointers, <!-- /react-text --><!-- react-text: 507 -->we need a pair of stacks of pointers, one per cursor.  Then we need to add some state transitions: <!-- /react-text --></p><ul data-reactid="508"><li data-reactid="509">When only the source cursor is nil, pop the source stack only.</li><li data-reactid="510">Likewise for target cursor.</li><li data-reactid="511"><!-- react-text: 512 -->When the source cursor is over a branch node, move it to the first child, <!-- /react-text --><!-- react-text: 513 -->and push the next position on the source stack.<!-- /react-text --></li><li data-reactid="514">Likewise for target cursor.</li></ul><p data-reactid="515"><!-- react-text: 516 -->Since there are quite a lot of branch nodes, this creates a ton of extra states for the algorithm to explore.  <!-- /react-text --><!-- react-text: 517 -->So although it seems like the steps which move both cursors up/down would obsolete, since they can <!-- /react-text --><!-- react-text: 518 -->be replicated with two single-cursor movements, they are needed so that performance is not terrible <!-- /react-text --><!-- react-text: 519 -->on mostly identical subtrees (ie the common case).  It is also helpful to make single-cursor movement cost <!-- /react-text --><!-- react-text: 520 -->more than two-cursor movement, so that we only try a single-cursor move after matched movement fails.  <!-- /react-text --><!-- react-text: 521 -->The extra cost basically represents that we are adding or removing a set of parens, although they are not annotated. <!-- /react-text --></p></li></ul></p></div><div data-reactid="522"><div class="sectiontitle" data-reactid="523">Worked Example</div><p data-reactid="524"><!-- react-text: 525 -->I don&#x27;t know about you, but I&#x27;m not the type who can absorb the essence of a complicated algorithm from a wall of text as seen above.  <!-- /react-text --><!-- react-text: 526 -->So let&#x27;s look at a detailed log of all the states we explored when generating the example diff at the top of this page.  <!-- /react-text --><!-- react-text: 527 -->Note that these are all the states we <!-- /react-text --><i data-reactid="528">explore</i><!-- react-text: 529 --> - some of them are never popped as the min-cost element of the PQ.  <!-- /react-text --><!-- react-text: 530 -->Here is our initial state:<!-- /react-text --></p><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="531"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="532"><div id="290730393" data-reactid="533"><div class="filename-heading" data-reactid="534"><span data-reactid="535"><!-- react-text: 536 -->#00 (popped) -0,+0 cost 0/-92 remain 90/92<!-- /react-text --><span data-reactid="537"><!-- react-text: 538 --> (<!-- /react-text --><!-- react-text: 539 -->11543199<!-- /react-text --><!-- react-text: 540 --> from <!-- /react-text --><a href="#" data-reactid="541"></a><!-- react-text: 542 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="543"><div class="diffpane" data-reactid="544"><div class="code-card" data-reactid="545"><div class="code-card-heading" data-reactid="546"><div class="code-card-heading-extra" data-reactid="547"></div></div><div class="container" data-reactid="548"><pre class="gutter" data-reactid="549"><code class="punctuation" data-reactid="550"><a href="the absolute1" data-reactid="551"><div data-reactid="552">1</div></a><a href="the absolute2" data-reactid="553"><div data-reactid="554">2</div></a><a href="the absolute3" data-reactid="555"><div data-reactid="556">3</div></a><a href="the absolute4" data-reactid="557"><div data-reactid="558">4</div></a><a href="the absolute5" data-reactid="559"><div data-reactid="560">5</div></a></code></pre><div style="width:1px;" data-reactid="561"></div><pre class="source" data-reactid="562"><!-- react-text: 563 -->(<!-- /react-text --><span class="shead" data-reactid="564">defn</span><!-- react-text: 565 --> <!-- /react-text --><!-- react-text: 566 -->example<!-- /react-text --><!-- react-text: 567 -->
  [<!-- /react-text --><!-- react-text: 568 -->x<!-- /react-text --><!-- react-text: 569 -->]
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="570"><span class="clojure-core" data-reactid="571">println</span></a><!-- react-text: 572 --> <!-- /react-text --><span class="string" data-reactid="573">&quot;hello!&quot;</span><!-- react-text: 574 -->)
  {<!-- /react-text --><span class="keyword" data-reactid="575">:more</span><!-- react-text: 576 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="577"><span class="clojure-core" data-reactid="578">inc</span></a><!-- react-text: 579 --> <!-- /react-text --><!-- react-text: 580 -->x<!-- /react-text --><!-- react-text: 581 -->)
   <!-- /react-text --><span class="keyword" data-reactid="582">:less</span><!-- react-text: 583 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="584"><span class="clojure-core" data-reactid="585">dec</span></a><!-- react-text: 586 --> <!-- /react-text --><!-- react-text: 587 -->x<!-- /react-text --><!-- react-text: 588 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="589"><div class="code-card" data-reactid="590"><div class="code-card-heading" data-reactid="591"><div class="code-card-heading-extra" data-reactid="592"></div></div><div class="container" data-reactid="593"><pre class="gutter" data-reactid="594"><code class="punctuation" data-reactid="595"><a href="worst hack1" data-reactid="596"><div data-reactid="597">1</div></a><a href="worst hack2" data-reactid="598"><div data-reactid="599">2</div></a><a href="worst hack3" data-reactid="600"><div data-reactid="601">3</div></a><a href="worst hack4" data-reactid="602"><div data-reactid="603">4</div></a><a href="worst hack5" data-reactid="604"><div data-reactid="605">5</div></a></code></pre><div style="width:1px;" data-reactid="606"></div><pre class="source" data-reactid="607"><!-- react-text: 608 -->(<!-- /react-text --><span class="thead" data-reactid="609">defn</span><!-- react-text: 610 --> <!-- /react-text --><!-- react-text: 611 -->example<!-- /react-text --><!-- react-text: 612 -->
  [<!-- /react-text --><!-- react-text: 613 -->x<!-- /react-text --><!-- react-text: 614 -->]
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/-&gt;" data-reactid="615"><span class="macro clojure-core" data-reactid="616">-&gt;</span></a><!-- react-text: 617 --> {<!-- /react-text --><span class="keyword" data-reactid="618">:more</span><!-- react-text: 619 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="620"><span class="clojure-core" data-reactid="621">inc</span></a><!-- react-text: 622 --> <!-- /react-text --><!-- react-text: 623 -->x<!-- /react-text --><!-- react-text: 624 -->)
       <!-- /react-text --><span class="keyword" data-reactid="625">:less</span><!-- react-text: 626 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="627"><span class="clojure-core" data-reactid="628">dec</span></a><!-- react-text: 629 --> <!-- /react-text --><!-- react-text: 630 -->x<!-- /react-text --><!-- react-text: 631 -->)}
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="632"><span class="clojure-core" data-reactid="633">assoc</span></a><!-- react-text: 634 --> <!-- /react-text --><span class="keyword" data-reactid="635">:twice</span><!-- react-text: 636 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="637"><span class="clojure-core" data-reactid="638">+</span></a><!-- react-text: 639 --> <!-- /react-text --><!-- react-text: 640 -->x<!-- /react-text --><!-- react-text: 641 --> <!-- /react-text --><!-- react-text: 642 -->x<!-- /react-text --><!-- react-text: 643 -->))))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="644"></div></div><div class="caption" data-reactid="645"><!-- react-text: 646 -->The source cursor is blue, and the target cursor is purple.  <!-- /react-text --><!-- react-text: 647 -->The header at the top shows information about the diff state:<!-- /react-text --><ul data-reactid="648"><li data-reactid="649"><span class="fixed" data-reactid="650">#000</span><!-- react-text: 651 -->  is the step in which this state was added.  <!-- /react-text --></li><li data-reactid="652"><span class="fixed" data-reactid="653">(popped)</span><!-- react-text: 654 -->  means this state was popped off the priority queue.  <!-- /react-text --></li><li data-reactid="655"><span class="fixed" data-reactid="656">-0/+0</span><!-- react-text: 657 -->  is deletions/additions<!-- /react-text --></li><li data-reactid="658"><span class="fixed" data-reactid="659">cost 0/-92</span><!-- react-text: 660 -->  is the heuristic cost / real cost.  Meaningless for start node.<!-- /react-text --></li><li data-reactid="661"><span class="fixed" data-reactid="662">remain 90/92</span><!-- react-text: 663 -->  is the remaining cost of the source and target trees.<!-- /react-text --></li></ul><div class="caption" data-reactid="664"><!-- react-text: 665 -->Note that real cost = heuristic cost - max(source remaining, target remaining).  <!-- /react-text --><!-- react-text: 666 -->By heuristic cost, I mean the estimated total distance from the start to the goal, used as the key in the priority queue, <!-- /react-text --><!-- react-text: 667 -->or <!-- /react-text --><i data-reactid="668">g(n) + h(n)</i><!-- react-text: 669 --> in <!-- /react-text --><a href="https://en.wikipedia.org/wiki/A*_search_algorithm#Description" data-reactid="670">typical A* notation.  </a></div></div><div class="caption" data-reactid="671">After we enter the main loop and pop the start state, we easily match the next two subtrees:</div><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="672"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="673"><div style="display:flex;flex-direction:column;" data-reactid="674"><div id="168854148" data-reactid="675"><div class="filename-heading" data-reactid="676"><span data-reactid="677"><!-- react-text: 678 -->#01 (popped best) -0,+0 cost 88/0 remain 86/88<!-- /react-text --><span data-reactid="679"><!-- react-text: 680 --> (<!-- /react-text --><!-- react-text: 681 -->a108284<!-- /react-text --><!-- react-text: 682 --> from <!-- /react-text --><a href="#290730393" data-reactid="683">11543199</a><!-- react-text: 684 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="685"><div class="diffpane" data-reactid="686"><div class="code-card" data-reactid="687"><div class="code-card-heading" data-reactid="688"><div class="code-card-heading-extra" data-reactid="689"></div></div><div class="container" data-reactid="690"><pre class="gutter" data-reactid="691"><code class="punctuation" data-reactid="692"><a href="the absolute1" data-reactid="693"><div data-reactid="694">1</div></a><a href="the absolute2" data-reactid="695"><div data-reactid="696">2</div></a><a href="the absolute3" data-reactid="697"><div data-reactid="698">3</div></a><a href="the absolute4" data-reactid="699"><div data-reactid="700">4</div></a><a href="the absolute5" data-reactid="701"><div data-reactid="702">5</div></a></code></pre><div style="width:1px;" data-reactid="703"></div><pre class="source" data-reactid="704"><!-- react-text: 705 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="706"><span class="macro clojure-core" data-reactid="707">defn</span></a><!-- react-text: 708 --> <!-- /react-text --><span class="shead" data-reactid="709">example</span><!-- react-text: 710 -->
  [<!-- /react-text --><!-- react-text: 711 -->x<!-- /react-text --><!-- react-text: 712 -->]
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="713"><span class="clojure-core" data-reactid="714">println</span></a><!-- react-text: 715 --> <!-- /react-text --><span class="string" data-reactid="716">&quot;hello!&quot;</span><!-- react-text: 717 -->)
  {<!-- /react-text --><span class="keyword" data-reactid="718">:more</span><!-- react-text: 719 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="720"><span class="clojure-core" data-reactid="721">inc</span></a><!-- react-text: 722 --> <!-- /react-text --><!-- react-text: 723 -->x<!-- /react-text --><!-- react-text: 724 -->)
   <!-- /react-text --><span class="keyword" data-reactid="725">:less</span><!-- react-text: 726 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="727"><span class="clojure-core" data-reactid="728">dec</span></a><!-- react-text: 729 --> <!-- /react-text --><!-- react-text: 730 -->x<!-- /react-text --><!-- react-text: 731 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="732"><div class="code-card" data-reactid="733"><div class="code-card-heading" data-reactid="734"><div class="code-card-heading-extra" data-reactid="735"></div></div><div class="container" data-reactid="736"><pre class="gutter" data-reactid="737"><code class="punctuation" data-reactid="738"><a href="worst hack1" data-reactid="739"><div data-reactid="740">1</div></a><a href="worst hack2" data-reactid="741"><div data-reactid="742">2</div></a><a href="worst hack3" data-reactid="743"><div data-reactid="744">3</div></a><a href="worst hack4" data-reactid="745"><div data-reactid="746">4</div></a><a href="worst hack5" data-reactid="747"><div data-reactid="748">5</div></a></code></pre><div style="width:1px;" data-reactid="749"></div><pre class="source" data-reactid="750"><!-- react-text: 751 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="752"><span class="macro clojure-core" data-reactid="753">defn</span></a><!-- react-text: 754 --> <!-- /react-text --><span class="thead" data-reactid="755">example</span><!-- react-text: 756 -->
  [<!-- /react-text --><!-- react-text: 757 -->x<!-- /react-text --><!-- react-text: 758 -->]
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/-&gt;" data-reactid="759"><span class="macro clojure-core" data-reactid="760">-&gt;</span></a><!-- react-text: 761 --> {<!-- /react-text --><span class="keyword" data-reactid="762">:more</span><!-- react-text: 763 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="764"><span class="clojure-core" data-reactid="765">inc</span></a><!-- react-text: 766 --> <!-- /react-text --><!-- react-text: 767 -->x<!-- /react-text --><!-- react-text: 768 -->)
       <!-- /react-text --><span class="keyword" data-reactid="769">:less</span><!-- react-text: 770 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="771"><span class="clojure-core" data-reactid="772">dec</span></a><!-- react-text: 773 --> <!-- /react-text --><!-- react-text: 774 -->x<!-- /react-text --><!-- react-text: 775 -->)}
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="776"><span class="clojure-core" data-reactid="777">assoc</span></a><!-- react-text: 778 --> <!-- /react-text --><span class="keyword" data-reactid="779">:twice</span><!-- react-text: 780 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="781"><span class="clojure-core" data-reactid="782">+</span></a><!-- react-text: 783 --> <!-- /react-text --><!-- react-text: 784 -->x<!-- /react-text --><!-- react-text: 785 --> <!-- /react-text --><!-- react-text: 786 -->x<!-- /react-text --><!-- react-text: 787 -->))))<!-- /react-text --></pre></div></div></div></div></div><div class="spacer" data-reactid="788"></div><div id="175838700" data-reactid="789"><div class="filename-heading" data-reactid="790"><span data-reactid="791"><!-- react-text: 792 -->#02 (popped best) -0,+0 cost 81/0 remain 79/81<!-- /react-text --><span data-reactid="793"><!-- react-text: 794 --> (<!-- /react-text --><!-- react-text: 795 -->a7b15ec<!-- /react-text --><!-- react-text: 796 --> from <!-- /react-text --><a href="#168854148" data-reactid="797">a108284</a><!-- react-text: 798 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="799"><div class="diffpane" data-reactid="800"><div class="code-card" data-reactid="801"><div class="code-card-heading" data-reactid="802"><div class="code-card-heading-extra" data-reactid="803"></div></div><div class="container" data-reactid="804"><pre class="gutter" data-reactid="805"><code class="punctuation" data-reactid="806"><a href="the absolute1" data-reactid="807"><div data-reactid="808">1</div></a><a href="the absolute2" data-reactid="809"><div data-reactid="810">2</div></a><a href="the absolute3" data-reactid="811"><div data-reactid="812">3</div></a><a href="the absolute4" data-reactid="813"><div data-reactid="814">4</div></a><a href="the absolute5" data-reactid="815"><div data-reactid="816">5</div></a></code></pre><div style="width:1px;" data-reactid="817"></div><pre class="source" data-reactid="818"><!-- react-text: 819 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="820"><span class="macro clojure-core" data-reactid="821">defn</span></a><!-- react-text: 822 --> <!-- /react-text --><!-- react-text: 823 -->example<!-- /react-text --><!-- react-text: 824 -->
  <!-- /react-text --><span class="shead" data-reactid="825"><span data-reactid="826"><!-- react-text: 827 -->[<!-- /react-text --><!-- react-text: 828 -->x<!-- /react-text --><!-- react-text: 829 -->]<!-- /react-text --></span></span><!-- react-text: 830 -->
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="831"><span class="clojure-core" data-reactid="832">println</span></a><!-- react-text: 833 --> <!-- /react-text --><span class="string" data-reactid="834">&quot;hello!&quot;</span><!-- react-text: 835 -->)
  {<!-- /react-text --><span class="keyword" data-reactid="836">:more</span><!-- react-text: 837 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="838"><span class="clojure-core" data-reactid="839">inc</span></a><!-- react-text: 840 --> <!-- /react-text --><!-- react-text: 841 -->x<!-- /react-text --><!-- react-text: 842 -->)
   <!-- /react-text --><span class="keyword" data-reactid="843">:less</span><!-- react-text: 844 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="845"><span class="clojure-core" data-reactid="846">dec</span></a><!-- react-text: 847 --> <!-- /react-text --><!-- react-text: 848 -->x<!-- /react-text --><!-- react-text: 849 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="850"><div class="code-card" data-reactid="851"><div class="code-card-heading" data-reactid="852"><div class="code-card-heading-extra" data-reactid="853"></div></div><div class="container" data-reactid="854"><pre class="gutter" data-reactid="855"><code class="punctuation" data-reactid="856"><a href="worst hack1" data-reactid="857"><div data-reactid="858">1</div></a><a href="worst hack2" data-reactid="859"><div data-reactid="860">2</div></a><a href="worst hack3" data-reactid="861"><div data-reactid="862">3</div></a><a href="worst hack4" data-reactid="863"><div data-reactid="864">4</div></a><a href="worst hack5" data-reactid="865"><div data-reactid="866">5</div></a></code></pre><div style="width:1px;" data-reactid="867"></div><pre class="source" data-reactid="868"><!-- react-text: 869 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="870"><span class="macro clojure-core" data-reactid="871">defn</span></a><!-- react-text: 872 --> <!-- /react-text --><!-- react-text: 873 -->example<!-- /react-text --><!-- react-text: 874 -->
  <!-- /react-text --><span class="thead" data-reactid="875"><span data-reactid="876"><!-- react-text: 877 -->[<!-- /react-text --><!-- react-text: 878 -->x<!-- /react-text --><!-- react-text: 879 -->]<!-- /react-text --></span></span><!-- react-text: 880 -->
  (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/-&gt;" data-reactid="881"><span class="macro clojure-core" data-reactid="882">-&gt;</span></a><!-- react-text: 883 --> {<!-- /react-text --><span class="keyword" data-reactid="884">:more</span><!-- react-text: 885 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="886"><span class="clojure-core" data-reactid="887">inc</span></a><!-- react-text: 888 --> <!-- /react-text --><!-- react-text: 889 -->x<!-- /react-text --><!-- react-text: 890 -->)
       <!-- /react-text --><span class="keyword" data-reactid="891">:less</span><!-- react-text: 892 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="893"><span class="clojure-core" data-reactid="894">dec</span></a><!-- react-text: 895 --> <!-- /react-text --><!-- react-text: 896 -->x<!-- /react-text --><!-- react-text: 897 -->)}
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="898"><span class="clojure-core" data-reactid="899">assoc</span></a><!-- react-text: 900 --> <!-- /react-text --><span class="keyword" data-reactid="901">:twice</span><!-- react-text: 902 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="903"><span class="clojure-core" data-reactid="904">+</span></a><!-- react-text: 905 --> <!-- /react-text --><!-- react-text: 906 -->x<!-- /react-text --><!-- react-text: 907 --> <!-- /react-text --><!-- react-text: 908 -->x<!-- /react-text --><!-- react-text: 909 -->))))<!-- /react-text --></pre></div></div></div></div></div><div class="spacer" data-reactid="910"></div><div id="750779510" data-reactid="911"><div class="filename-heading" data-reactid="912"><span data-reactid="913"><!-- react-text: 914 -->#03 (popped best) -0,+0 cost 80/0 remain 78/80<!-- /react-text --><span data-reactid="915"><!-- react-text: 916 --> (<!-- /react-text --><!-- react-text: 917 -->2cbffc76<!-- /react-text --><!-- react-text: 918 --> from <!-- /react-text --><a href="#175838700" data-reactid="919">a7b15ec</a><!-- react-text: 920 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="921"><div class="diffpane" data-reactid="922"><div class="code-card" data-reactid="923"><div class="code-card-heading" data-reactid="924"><div class="code-card-heading-extra" data-reactid="925"></div></div><div class="container" data-reactid="926"><pre class="gutter" data-reactid="927"><code class="punctuation" data-reactid="928"><a href="the absolute1" data-reactid="929"><div data-reactid="930">1</div></a><a href="the absolute2" data-reactid="931"><div data-reactid="932">2</div></a><a href="the absolute3" data-reactid="933"><div data-reactid="934">3</div></a><a href="the absolute4" data-reactid="935"><div data-reactid="936">4</div></a><a href="the absolute5" data-reactid="937"><div data-reactid="938">5</div></a></code></pre><div style="width:1px;" data-reactid="939"></div><pre class="source" data-reactid="940"><!-- react-text: 941 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="942"><span class="macro clojure-core" data-reactid="943">defn</span></a><!-- react-text: 944 --> <!-- /react-text --><!-- react-text: 945 -->example<!-- /react-text --><!-- react-text: 946 -->
  [<!-- /react-text --><!-- react-text: 947 -->x<!-- /react-text --><!-- react-text: 948 -->]
  <!-- /react-text --><span class="shead" data-reactid="949"><span data-reactid="950"><!-- react-text: 951 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="952"><span class="clojure-core" data-reactid="953">println</span></a><!-- react-text: 954 --> <!-- /react-text --><span class="string" data-reactid="955">&quot;hello!&quot;</span><!-- react-text: 956 -->)<!-- /react-text --></span></span><!-- react-text: 957 -->
  {<!-- /react-text --><span class="keyword" data-reactid="958">:more</span><!-- react-text: 959 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="960"><span class="clojure-core" data-reactid="961">inc</span></a><!-- react-text: 962 --> <!-- /react-text --><!-- react-text: 963 -->x<!-- /react-text --><!-- react-text: 964 -->)
   <!-- /react-text --><span class="keyword" data-reactid="965">:less</span><!-- react-text: 966 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="967"><span class="clojure-core" data-reactid="968">dec</span></a><!-- react-text: 969 --> <!-- /react-text --><!-- react-text: 970 -->x<!-- /react-text --><!-- react-text: 971 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="972"><div class="code-card" data-reactid="973"><div class="code-card-heading" data-reactid="974"><div class="code-card-heading-extra" data-reactid="975"></div></div><div class="container" data-reactid="976"><pre class="gutter" data-reactid="977"><code class="punctuation" data-reactid="978"><a href="worst hack1" data-reactid="979"><div data-reactid="980">1</div></a><a href="worst hack2" data-reactid="981"><div data-reactid="982">2</div></a><a href="worst hack3" data-reactid="983"><div data-reactid="984">3</div></a><a href="worst hack4" data-reactid="985"><div data-reactid="986">4</div></a><a href="worst hack5" data-reactid="987"><div data-reactid="988">5</div></a></code></pre><div style="width:1px;" data-reactid="989"></div><pre class="source" data-reactid="990"><!-- react-text: 991 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="992"><span class="macro clojure-core" data-reactid="993">defn</span></a><!-- react-text: 994 --> <!-- /react-text --><!-- react-text: 995 -->example<!-- /react-text --><!-- react-text: 996 -->
  [<!-- /react-text --><!-- react-text: 997 -->x<!-- /react-text --><!-- react-text: 998 -->]
  <!-- /react-text --><span class="thead" data-reactid="999"><span data-reactid="1000"><!-- react-text: 1001 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/-&gt;" data-reactid="1002"><span class="macro clojure-core" data-reactid="1003">-&gt;</span></a><!-- react-text: 1004 --> <!-- /react-text --><span data-reactid="1005"><!-- react-text: 1006 -->{<!-- /react-text --><span class="keyword" data-reactid="1007">:more</span><!-- react-text: 1008 --> <!-- /react-text --><span data-reactid="1009"><!-- react-text: 1010 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1011"><span class="clojure-core" data-reactid="1012">inc</span></a><!-- react-text: 1013 --> <!-- /react-text --><!-- react-text: 1014 -->x<!-- /react-text --><!-- react-text: 1015 -->)<!-- /react-text --></span><!-- react-text: 1016 -->
<!-- /react-text --><!-- react-text: 1017 -->       <!-- /react-text --><span class="keyword" data-reactid="1018">:less</span><!-- react-text: 1019 --> <!-- /react-text --><span data-reactid="1020"><!-- react-text: 1021 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1022"><span class="clojure-core" data-reactid="1023">dec</span></a><!-- react-text: 1024 --> <!-- /react-text --><!-- react-text: 1025 -->x<!-- /react-text --><!-- react-text: 1026 -->)<!-- /react-text --></span><!-- react-text: 1027 -->}<!-- /react-text --></span><!-- react-text: 1028 -->
<!-- /react-text --><!-- react-text: 1029 -->      <!-- /react-text --><span data-reactid="1030"><!-- react-text: 1031 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1032"><span class="clojure-core" data-reactid="1033">assoc</span></a><!-- react-text: 1034 --> <!-- /react-text --><span class="keyword" data-reactid="1035">:twice</span><!-- react-text: 1036 --> <!-- /react-text --><span data-reactid="1037"><!-- react-text: 1038 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1039"><span class="clojure-core" data-reactid="1040">+</span></a><!-- react-text: 1041 --> <!-- /react-text --><!-- react-text: 1042 -->x<!-- /react-text --><!-- react-text: 1043 --> <!-- /react-text --><!-- react-text: 1044 -->x<!-- /react-text --><!-- react-text: 1045 -->)<!-- /react-text --></span><!-- react-text: 1046 -->)<!-- /react-text --></span><!-- react-text: 1047 -->)<!-- /react-text --></span></span><!-- react-text: 1048 -->)<!-- /react-text --></pre></div></div></div></div></div></div></div><div style="width:100%;" data-reactid="1049"></div></div><div class="caption" data-reactid="1050"><!-- react-text: 1051 -->Now we have our first mismatch.  We have a few options here:<!-- /react-text --><ol data-reactid="1052"><li data-reactid="1053">Delete blue subtree</li><li data-reactid="1054">Add purple subtree</li><li data-reactid="1055">Go into both subtrees</li><li data-reactid="1056">Go into blue subtree only</li><li data-reactid="1057">Go into purple subtree only</li></ol></div><div class="caption" data-reactid="1058">We explore all of those options, but eventually we choose the last:</div><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1059"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1060"><div id="67250457" data-reactid="1061"><div class="filename-heading" data-reactid="1062"><span data-reactid="1063"><!-- react-text: 1064 -->#08 (popped best) -0,+0 cost 82/2 remain 78/80<!-- /react-text --><span data-reactid="1065"><!-- react-text: 1066 --> (<!-- /react-text --><!-- react-text: 1067 -->4022919<!-- /react-text --><!-- react-text: 1068 --> from <!-- /react-text --><a href="#750779510" data-reactid="1069">2cbffc76</a><!-- react-text: 1070 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1071"><div class="diffpane" data-reactid="1072"><div class="code-card" data-reactid="1073"><div class="code-card-heading" data-reactid="1074"><div class="code-card-heading-extra" data-reactid="1075"></div></div><div class="container" data-reactid="1076"><pre class="gutter" data-reactid="1077"><code class="punctuation" data-reactid="1078"><a href="the absolute1" data-reactid="1079"><div data-reactid="1080">1</div></a><a href="the absolute2" data-reactid="1081"><div data-reactid="1082">2</div></a><a href="the absolute3" data-reactid="1083"><div data-reactid="1084">3</div></a><a href="the absolute4" data-reactid="1085"><div data-reactid="1086">4</div></a><a href="the absolute5" data-reactid="1087"><div data-reactid="1088">5</div></a></code></pre><div style="width:1px;" data-reactid="1089"></div><pre class="source" data-reactid="1090"><!-- react-text: 1091 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1092"><span class="macro clojure-core" data-reactid="1093">defn</span></a><!-- react-text: 1094 --> <!-- /react-text --><!-- react-text: 1095 -->example<!-- /react-text --><!-- react-text: 1096 -->
  [<!-- /react-text --><!-- react-text: 1097 -->x<!-- /react-text --><!-- react-text: 1098 -->]
  <!-- /react-text --><span class="shead" data-reactid="1099"><span data-reactid="1100"><!-- react-text: 1101 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1102"><span class="clojure-core" data-reactid="1103">println</span></a><!-- react-text: 1104 --> <!-- /react-text --><span class="string" data-reactid="1105">&quot;hello!&quot;</span><!-- react-text: 1106 -->)<!-- /react-text --></span></span><!-- react-text: 1107 -->
  {<!-- /react-text --><span class="keyword" data-reactid="1108">:more</span><!-- react-text: 1109 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1110"><span class="clojure-core" data-reactid="1111">inc</span></a><!-- react-text: 1112 --> <!-- /react-text --><!-- react-text: 1113 -->x<!-- /react-text --><!-- react-text: 1114 -->)
   <!-- /react-text --><span class="keyword" data-reactid="1115">:less</span><!-- react-text: 1116 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1117"><span class="clojure-core" data-reactid="1118">dec</span></a><!-- react-text: 1119 --> <!-- /react-text --><!-- react-text: 1120 -->x<!-- /react-text --><!-- react-text: 1121 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1122"><div class="code-card" data-reactid="1123"><div class="code-card-heading" data-reactid="1124"><div class="code-card-heading-extra" data-reactid="1125"></div></div><div class="container" data-reactid="1126"><pre class="gutter" data-reactid="1127"><code class="punctuation" data-reactid="1128"><a href="worst hack1" data-reactid="1129"><div data-reactid="1130">1</div></a><a href="worst hack2" data-reactid="1131"><div data-reactid="1132">2</div></a><a href="worst hack3" data-reactid="1133"><div data-reactid="1134">3</div></a><a href="worst hack4" data-reactid="1135"><div data-reactid="1136">4</div></a><a href="worst hack5" data-reactid="1137"><div data-reactid="1138">5</div></a></code></pre><div style="width:1px;" data-reactid="1139"></div><pre class="source" data-reactid="1140"><!-- react-text: 1141 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1142"><span class="macro clojure-core" data-reactid="1143">defn</span></a><!-- react-text: 1144 --> <!-- /react-text --><!-- react-text: 1145 -->example<!-- /react-text --><!-- react-text: 1146 -->
  [<!-- /react-text --><!-- react-text: 1147 -->x<!-- /react-text --><!-- react-text: 1148 -->]
  (<!-- /react-text --><span class="thead" data-reactid="1149">-&gt;</span><!-- react-text: 1150 --> {<!-- /react-text --><span class="keyword" data-reactid="1151">:more</span><!-- react-text: 1152 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1153"><span class="clojure-core" data-reactid="1154">inc</span></a><!-- react-text: 1155 --> <!-- /react-text --><!-- react-text: 1156 -->x<!-- /react-text --><!-- react-text: 1157 -->)
       <!-- /react-text --><span class="keyword" data-reactid="1158">:less</span><!-- react-text: 1159 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1160"><span class="clojure-core" data-reactid="1161">dec</span></a><!-- react-text: 1162 --> <!-- /react-text --><!-- react-text: 1163 -->x<!-- /react-text --><!-- react-text: 1164 -->)}
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1165"><span class="clojure-core" data-reactid="1166">assoc</span></a><!-- react-text: 1167 --> <!-- /react-text --><span class="keyword" data-reactid="1168">:twice</span><!-- react-text: 1169 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1170"><span class="clojure-core" data-reactid="1171">+</span></a><!-- react-text: 1172 --> <!-- /react-text --><!-- react-text: 1173 -->x<!-- /react-text --><!-- react-text: 1174 --> <!-- /react-text --><!-- react-text: 1175 -->x<!-- /react-text --><!-- react-text: 1176 -->))))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1177"></div></div><div class="caption" data-reactid="1178"><!-- react-text: 1179 -->Then we add <!-- /react-text --><span class="fixed" data-reactid="1180">-&gt;</span></div><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1181"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1182"><div id="437678153" data-reactid="1183"><div class="filename-heading" data-reactid="1184"><span data-reactid="1185"><!-- react-text: 1186 -->#12 (popped best) -0,+1 cost 83/5 remain 78/78<!-- /react-text --><span data-reactid="1187"><!-- react-text: 1188 --> (<!-- /react-text --><!-- react-text: 1189 -->1a167049<!-- /react-text --><!-- react-text: 1190 --> from <!-- /react-text --><a href="#67250457" data-reactid="1191">4022919</a><!-- react-text: 1192 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1193"><div class="diffpane" data-reactid="1194"><div class="code-card" data-reactid="1195"><div class="code-card-heading" data-reactid="1196"><div class="code-card-heading-extra" data-reactid="1197"></div></div><div class="container" data-reactid="1198"><pre class="gutter" data-reactid="1199"><code class="punctuation" data-reactid="1200"><a href="the absolute1" data-reactid="1201"><div data-reactid="1202">1</div></a><a href="the absolute2" data-reactid="1203"><div data-reactid="1204">2</div></a><a href="the absolute3" data-reactid="1205"><div data-reactid="1206">3</div></a><a href="the absolute4" data-reactid="1207"><div data-reactid="1208">4</div></a><a href="the absolute5" data-reactid="1209"><div data-reactid="1210">5</div></a></code></pre><div style="width:1px;" data-reactid="1211"></div><pre class="source" data-reactid="1212"><!-- react-text: 1213 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1214"><span class="macro clojure-core" data-reactid="1215">defn</span></a><!-- react-text: 1216 --> <!-- /react-text --><!-- react-text: 1217 -->example<!-- /react-text --><!-- react-text: 1218 -->
  [<!-- /react-text --><!-- react-text: 1219 -->x<!-- /react-text --><!-- react-text: 1220 -->]
  <!-- /react-text --><span class="shead" data-reactid="1221"><span data-reactid="1222"><!-- react-text: 1223 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1224"><span class="clojure-core" data-reactid="1225">println</span></a><!-- react-text: 1226 --> <!-- /react-text --><span class="string" data-reactid="1227">&quot;hello!&quot;</span><!-- react-text: 1228 -->)<!-- /react-text --></span></span><!-- react-text: 1229 -->
  {<!-- /react-text --><span class="keyword" data-reactid="1230">:more</span><!-- react-text: 1231 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1232"><span class="clojure-core" data-reactid="1233">inc</span></a><!-- react-text: 1234 --> <!-- /react-text --><!-- react-text: 1235 -->x<!-- /react-text --><!-- react-text: 1236 -->)
   <!-- /react-text --><span class="keyword" data-reactid="1237">:less</span><!-- react-text: 1238 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1239"><span class="clojure-core" data-reactid="1240">dec</span></a><!-- react-text: 1241 --> <!-- /react-text --><!-- react-text: 1242 -->x<!-- /react-text --><!-- react-text: 1243 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1244"><div class="code-card" data-reactid="1245"><div class="code-card-heading" data-reactid="1246"><div class="code-card-heading-extra" data-reactid="1247"></div></div><div class="container" data-reactid="1248"><pre class="gutter" data-reactid="1249"><code class="punctuation" data-reactid="1250"><a href="worst hack1" data-reactid="1251"><div data-reactid="1252">1</div></a><a href="worst hack2" data-reactid="1253"><div data-reactid="1254">2</div></a><a href="worst hack3" data-reactid="1255"><div data-reactid="1256">3</div></a><a href="worst hack4" data-reactid="1257"><div data-reactid="1258">4</div></a><a href="worst hack5" data-reactid="1259"><div data-reactid="1260">5</div></a></code></pre><div style="width:1px;" data-reactid="1261"></div><pre class="source" data-reactid="1262"><!-- react-text: 1263 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1264"><span class="macro clojure-core" data-reactid="1265">defn</span></a><!-- react-text: 1266 --> <!-- /react-text --><!-- react-text: 1267 -->example<!-- /react-text --><!-- react-text: 1268 -->
  [<!-- /react-text --><!-- react-text: 1269 -->x<!-- /react-text --><!-- react-text: 1270 -->]
  (<!-- /react-text --><span class="added" data-reactid="1271">-&gt;</span><!-- react-text: 1272 --> <!-- /react-text --><span class="thead" data-reactid="1273"><span data-reactid="1274"><!-- react-text: 1275 -->{<!-- /react-text --><span class="keyword" data-reactid="1276">:more</span><!-- react-text: 1277 --> <!-- /react-text --><span data-reactid="1278"><!-- react-text: 1279 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1280"><span class="clojure-core" data-reactid="1281">inc</span></a><!-- react-text: 1282 --> <!-- /react-text --><!-- react-text: 1283 -->x<!-- /react-text --><!-- react-text: 1284 -->)<!-- /react-text --></span><!-- react-text: 1285 -->
<!-- /react-text --><!-- react-text: 1286 -->       <!-- /react-text --><span class="keyword" data-reactid="1287">:less</span><!-- react-text: 1288 --> <!-- /react-text --><span data-reactid="1289"><!-- react-text: 1290 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1291"><span class="clojure-core" data-reactid="1292">dec</span></a><!-- react-text: 1293 --> <!-- /react-text --><!-- react-text: 1294 -->x<!-- /react-text --><!-- react-text: 1295 -->)<!-- /react-text --></span><!-- react-text: 1296 -->}<!-- /react-text --></span></span><!-- react-text: 1297 -->
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1298"><span class="clojure-core" data-reactid="1299">assoc</span></a><!-- react-text: 1300 --> <!-- /react-text --><span class="keyword" data-reactid="1301">:twice</span><!-- react-text: 1302 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1303"><span class="clojure-core" data-reactid="1304">+</span></a><!-- react-text: 1305 --> <!-- /react-text --><!-- react-text: 1306 -->x<!-- /react-text --><!-- react-text: 1307 --> <!-- /react-text --><!-- react-text: 1308 -->x<!-- /react-text --><!-- react-text: 1309 -->))))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1310"></div></div><div class="caption" data-reactid="1311"><!-- react-text: 1312 -->Now, we enqueue #20, where we delete <!-- /react-text --><span class="fixed" data-reactid="1313">(println &quot;hello&quot;)</span><!-- react-text: 1314 -->:<!-- /react-text --></div><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1315"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1316"><div id="539184457" data-reactid="1317"><div class="filename-heading" data-reactid="1318"><span data-reactid="1319"><!-- react-text: 1320 -->#20 (popped best) -1,+1 cost 99/21 remain 63/78<!-- /react-text --><span data-reactid="1321"><!-- react-text: 1322 --> (<!-- /react-text --><!-- react-text: 1323 -->20234d49<!-- /react-text --><!-- react-text: 1324 --> from <!-- /react-text --><a href="#437678153" data-reactid="1325">1a167049</a><!-- react-text: 1326 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1327"><div class="diffpane" data-reactid="1328"><div class="code-card" data-reactid="1329"><div class="code-card-heading" data-reactid="1330"><div class="code-card-heading-extra" data-reactid="1331"></div></div><div class="container" data-reactid="1332"><pre class="gutter" data-reactid="1333"><code class="punctuation" data-reactid="1334"><a href="the absolute1" data-reactid="1335"><div data-reactid="1336">1</div></a><a href="the absolute2" data-reactid="1337"><div data-reactid="1338">2</div></a><a href="the absolute3" data-reactid="1339"><div data-reactid="1340">3</div></a><a href="the absolute4" data-reactid="1341"><div data-reactid="1342">4</div></a><a href="the absolute5" data-reactid="1343"><div data-reactid="1344">5</div></a></code></pre><div style="width:1px;" data-reactid="1345"></div><pre class="source" data-reactid="1346"><!-- react-text: 1347 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1348"><span class="macro clojure-core" data-reactid="1349">defn</span></a><!-- react-text: 1350 --> <!-- /react-text --><!-- react-text: 1351 -->example<!-- /react-text --><!-- react-text: 1352 -->
  [<!-- /react-text --><!-- react-text: 1353 -->x<!-- /react-text --><!-- react-text: 1354 -->]
  <!-- /react-text --><span class="deleted" data-reactid="1355"><span data-reactid="1356"><!-- react-text: 1357 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1358"><span class="clojure-core" data-reactid="1359">println</span></a><!-- react-text: 1360 --> <!-- /react-text --><span class="string" data-reactid="1361">&quot;hello!&quot;</span><!-- react-text: 1362 -->)<!-- /react-text --></span></span><!-- react-text: 1363 -->
  <!-- /react-text --><span class="shead" data-reactid="1364"><span data-reactid="1365"><!-- react-text: 1366 -->{<!-- /react-text --><span class="keyword" data-reactid="1367">:more</span><!-- react-text: 1368 --> <!-- /react-text --><span data-reactid="1369"><!-- react-text: 1370 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1371"><span class="clojure-core" data-reactid="1372">inc</span></a><!-- react-text: 1373 --> <!-- /react-text --><!-- react-text: 1374 -->x<!-- /react-text --><!-- react-text: 1375 -->)<!-- /react-text --></span><!-- react-text: 1376 -->
<!-- /react-text --><!-- react-text: 1377 -->   <!-- /react-text --><span class="keyword" data-reactid="1378">:less</span><!-- react-text: 1379 --> <!-- /react-text --><span data-reactid="1380"><!-- react-text: 1381 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1382"><span class="clojure-core" data-reactid="1383">dec</span></a><!-- react-text: 1384 --> <!-- /react-text --><!-- react-text: 1385 -->x<!-- /react-text --><!-- react-text: 1386 -->)<!-- /react-text --></span><!-- react-text: 1387 -->}<!-- /react-text --></span></span><!-- react-text: 1388 -->)<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1389"><div class="code-card" data-reactid="1390"><div class="code-card-heading" data-reactid="1391"><div class="code-card-heading-extra" data-reactid="1392"></div></div><div class="container" data-reactid="1393"><pre class="gutter" data-reactid="1394"><code class="punctuation" data-reactid="1395"><a href="worst hack1" data-reactid="1396"><div data-reactid="1397">1</div></a><a href="worst hack2" data-reactid="1398"><div data-reactid="1399">2</div></a><a href="worst hack3" data-reactid="1400"><div data-reactid="1401">3</div></a><a href="worst hack4" data-reactid="1402"><div data-reactid="1403">4</div></a><a href="worst hack5" data-reactid="1404"><div data-reactid="1405">5</div></a></code></pre><div style="width:1px;" data-reactid="1406"></div><pre class="source" data-reactid="1407"><!-- react-text: 1408 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1409"><span class="macro clojure-core" data-reactid="1410">defn</span></a><!-- react-text: 1411 --> <!-- /react-text --><!-- react-text: 1412 -->example<!-- /react-text --><!-- react-text: 1413 -->
  [<!-- /react-text --><!-- react-text: 1414 -->x<!-- /react-text --><!-- react-text: 1415 -->]
  (<!-- /react-text --><span class="added" data-reactid="1416">-&gt;</span><!-- react-text: 1417 --> <!-- /react-text --><span class="thead" data-reactid="1418"><span data-reactid="1419"><!-- react-text: 1420 -->{<!-- /react-text --><span class="keyword" data-reactid="1421">:more</span><!-- react-text: 1422 --> <!-- /react-text --><span data-reactid="1423"><!-- react-text: 1424 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1425"><span class="clojure-core" data-reactid="1426">inc</span></a><!-- react-text: 1427 --> <!-- /react-text --><!-- react-text: 1428 -->x<!-- /react-text --><!-- react-text: 1429 -->)<!-- /react-text --></span><!-- react-text: 1430 -->
<!-- /react-text --><!-- react-text: 1431 -->       <!-- /react-text --><span class="keyword" data-reactid="1432">:less</span><!-- react-text: 1433 --> <!-- /react-text --><span data-reactid="1434"><!-- react-text: 1435 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1436"><span class="clojure-core" data-reactid="1437">dec</span></a><!-- react-text: 1438 --> <!-- /react-text --><!-- react-text: 1439 -->x<!-- /react-text --><!-- react-text: 1440 -->)<!-- /react-text --></span><!-- react-text: 1441 -->}<!-- /react-text --></span></span><!-- react-text: 1442 -->
      (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1443"><span class="clojure-core" data-reactid="1444">assoc</span></a><!-- react-text: 1445 --> <!-- /react-text --><span class="keyword" data-reactid="1446">:twice</span><!-- react-text: 1447 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1448"><span class="clojure-core" data-reactid="1449">+</span></a><!-- react-text: 1450 --> <!-- /react-text --><!-- react-text: 1451 -->x<!-- /react-text --><!-- react-text: 1452 --> <!-- /react-text --><!-- react-text: 1453 -->x<!-- /react-text --><!-- react-text: 1454 -->))))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1455"></div></div><div class="caption" data-reactid="1456"><!-- react-text: 1457 -->It turns out that since deleting <!-- /react-text --><span class="fixed" data-reactid="1458">(println &quot;hello&quot;)</span><!-- react-text: 1459 --> has a relatively high cost, <!-- /react-text --><!-- react-text: 1460 -->  we go through a bunch of other states before we finally pop #20.  <!-- /react-text --><!-- react-text: 1461 -->But once we do, we can match the identical subtrees and get to here:<!-- /react-text --></div><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1462"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1463"><div id="1017450188" data-reactid="1464"><div class="filename-heading" data-reactid="1465"><span data-reactid="1466"><!-- react-text: 1467 -->#85 (popped best) -1,+1 cost 81/21 remain 45/60 (nil S)<!-- /react-text --><span data-reactid="1468"><!-- react-text: 1469 --> (<!-- /react-text --><!-- react-text: 1470 -->3ca50ecc<!-- /react-text --><!-- react-text: 1471 --> from <!-- /react-text --><a href="#539184457" data-reactid="1472">20234d49</a><!-- react-text: 1473 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1474"><div class="diffpane" data-reactid="1475"><div class="code-card" data-reactid="1476"><div class="code-card-heading" data-reactid="1477"><div class="code-card-heading-extra" data-reactid="1478"></div></div><div class="container" data-reactid="1479"><pre class="gutter" data-reactid="1480"><code class="punctuation" data-reactid="1481"><a href="the absolute1" data-reactid="1482"><div data-reactid="1483">1</div></a><a href="the absolute2" data-reactid="1484"><div data-reactid="1485">2</div></a><a href="the absolute3" data-reactid="1486"><div data-reactid="1487">3</div></a><a href="the absolute4" data-reactid="1488"><div data-reactid="1489">4</div></a><a href="the absolute5" data-reactid="1490"><div data-reactid="1491">5</div></a></code></pre><div style="width:1px;" data-reactid="1492"></div><pre class="source" data-reactid="1493"><!-- react-text: 1494 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1495"><span class="macro clojure-core" data-reactid="1496">defn</span></a><!-- react-text: 1497 --> <!-- /react-text --><!-- react-text: 1498 -->example<!-- /react-text --><!-- react-text: 1499 -->
  [<!-- /react-text --><!-- react-text: 1500 -->x<!-- /react-text --><!-- react-text: 1501 -->]
  <!-- /react-text --><span class="deleted" data-reactid="1502"><span data-reactid="1503"><!-- react-text: 1504 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1505"><span class="clojure-core" data-reactid="1506">println</span></a><!-- react-text: 1507 --> <!-- /react-text --><span class="string" data-reactid="1508">&quot;hello!&quot;</span><!-- react-text: 1509 -->)<!-- /react-text --></span></span><!-- react-text: 1510 -->
  {<!-- /react-text --><span class="keyword" data-reactid="1511">:more</span><!-- react-text: 1512 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1513"><span class="clojure-core" data-reactid="1514">inc</span></a><!-- react-text: 1515 --> <!-- /react-text --><!-- react-text: 1516 -->x<!-- /react-text --><!-- react-text: 1517 -->)
   <!-- /react-text --><span class="keyword" data-reactid="1518">:less</span><!-- react-text: 1519 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1520"><span class="clojure-core" data-reactid="1521">dec</span></a><!-- react-text: 1522 --> <!-- /react-text --><!-- react-text: 1523 -->x<!-- /react-text --><!-- react-text: 1524 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1525"><div class="code-card" data-reactid="1526"><div class="code-card-heading" data-reactid="1527"><div class="code-card-heading-extra" data-reactid="1528"></div></div><div class="container" data-reactid="1529"><pre class="gutter" data-reactid="1530"><code class="punctuation" data-reactid="1531"><a href="worst hack1" data-reactid="1532"><div data-reactid="1533">1</div></a><a href="worst hack2" data-reactid="1534"><div data-reactid="1535">2</div></a><a href="worst hack3" data-reactid="1536"><div data-reactid="1537">3</div></a><a href="worst hack4" data-reactid="1538"><div data-reactid="1539">4</div></a><a href="worst hack5" data-reactid="1540"><div data-reactid="1541">5</div></a></code></pre><div style="width:1px;" data-reactid="1542"></div><pre class="source" data-reactid="1543"><!-- react-text: 1544 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1545"><span class="macro clojure-core" data-reactid="1546">defn</span></a><!-- react-text: 1547 --> <!-- /react-text --><!-- react-text: 1548 -->example<!-- /react-text --><!-- react-text: 1549 -->
  [<!-- /react-text --><!-- react-text: 1550 -->x<!-- /react-text --><!-- react-text: 1551 -->]
  (<!-- /react-text --><span class="added" data-reactid="1552">-&gt;</span><!-- react-text: 1553 --> {<!-- /react-text --><span class="keyword" data-reactid="1554">:more</span><!-- react-text: 1555 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1556"><span class="clojure-core" data-reactid="1557">inc</span></a><!-- react-text: 1558 --> <!-- /react-text --><!-- react-text: 1559 -->x<!-- /react-text --><!-- react-text: 1560 -->)
       <!-- /react-text --><span class="keyword" data-reactid="1561">:less</span><!-- react-text: 1562 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1563"><span class="clojure-core" data-reactid="1564">dec</span></a><!-- react-text: 1565 --> <!-- /react-text --><!-- react-text: 1566 -->x<!-- /react-text --><!-- react-text: 1567 -->)}
      <!-- /react-text --><span class="thead" data-reactid="1568"><span data-reactid="1569"><!-- react-text: 1570 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1571"><span class="clojure-core" data-reactid="1572">assoc</span></a><!-- react-text: 1573 --> <!-- /react-text --><span class="keyword" data-reactid="1574">:twice</span><!-- react-text: 1575 --> <!-- /react-text --><span data-reactid="1576"><!-- react-text: 1577 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1578"><span class="clojure-core" data-reactid="1579">+</span></a><!-- react-text: 1580 --> <!-- /react-text --><!-- react-text: 1581 -->x<!-- /react-text --><!-- react-text: 1582 --> <!-- /react-text --><!-- react-text: 1583 -->x<!-- /react-text --><!-- react-text: 1584 -->)<!-- /react-text --></span><!-- react-text: 1585 -->)<!-- /react-text --></span></span><!-- react-text: 1586 -->))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1587"></div></div><div class="caption" data-reactid="1588"><!-- react-text: 1589 -->Here we are at the end of the source list (the defn body), <!-- /react-text --><!-- react-text: 1590 -->so no cursor is drawn and it says (nil S) in the header.  <!-- /react-text --><!-- react-text: 1591 -->From here we add <!-- /react-text --><span class="fixed" data-reactid="1592">(assoc :twice (+ x x))</span><!-- react-text: 1593 -->:<!-- /react-text --></div><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1594"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1595"><div id="1937324481" data-reactid="1596"><div class="filename-heading" data-reactid="1597"><span data-reactid="1598"><!-- react-text: 1599 -->#86 (popped best) -1,+2 cost 82/36 remain 45/46 (nil S) (nil T)<!-- /react-text --><span data-reactid="1600"><!-- react-text: 1601 --> (<!-- /react-text --><!-- react-text: 1602 -->737939c1<!-- /react-text --><!-- react-text: 1603 --> from <!-- /react-text --><a href="#1017450188" data-reactid="1604">3ca50ecc</a><!-- react-text: 1605 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1606"><div class="diffpane" data-reactid="1607"><div class="code-card" data-reactid="1608"><div class="code-card-heading" data-reactid="1609"><div class="code-card-heading-extra" data-reactid="1610"></div></div><div class="container" data-reactid="1611"><pre class="gutter" data-reactid="1612"><code class="punctuation" data-reactid="1613"><a href="the absolute1" data-reactid="1614"><div data-reactid="1615">1</div></a><a href="the absolute2" data-reactid="1616"><div data-reactid="1617">2</div></a><a href="the absolute3" data-reactid="1618"><div data-reactid="1619">3</div></a><a href="the absolute4" data-reactid="1620"><div data-reactid="1621">4</div></a><a href="the absolute5" data-reactid="1622"><div data-reactid="1623">5</div></a></code></pre><div style="width:1px;" data-reactid="1624"></div><pre class="source" data-reactid="1625"><!-- react-text: 1626 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1627"><span class="macro clojure-core" data-reactid="1628">defn</span></a><!-- react-text: 1629 --> <!-- /react-text --><!-- react-text: 1630 -->example<!-- /react-text --><!-- react-text: 1631 -->
  [<!-- /react-text --><!-- react-text: 1632 -->x<!-- /react-text --><!-- react-text: 1633 -->]
  <!-- /react-text --><span class="deleted" data-reactid="1634"><span data-reactid="1635"><!-- react-text: 1636 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1637"><span class="clojure-core" data-reactid="1638">println</span></a><!-- react-text: 1639 --> <!-- /react-text --><span class="string" data-reactid="1640">&quot;hello!&quot;</span><!-- react-text: 1641 -->)<!-- /react-text --></span></span><!-- react-text: 1642 -->
  {<!-- /react-text --><span class="keyword" data-reactid="1643">:more</span><!-- react-text: 1644 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1645"><span class="clojure-core" data-reactid="1646">inc</span></a><!-- react-text: 1647 --> <!-- /react-text --><!-- react-text: 1648 -->x<!-- /react-text --><!-- react-text: 1649 -->)
   <!-- /react-text --><span class="keyword" data-reactid="1650">:less</span><!-- react-text: 1651 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1652"><span class="clojure-core" data-reactid="1653">dec</span></a><!-- react-text: 1654 --> <!-- /react-text --><!-- react-text: 1655 -->x<!-- /react-text --><!-- react-text: 1656 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1657"><div class="code-card" data-reactid="1658"><div class="code-card-heading" data-reactid="1659"><div class="code-card-heading-extra" data-reactid="1660"></div></div><div class="container" data-reactid="1661"><pre class="gutter" data-reactid="1662"><code class="punctuation" data-reactid="1663"><a href="worst hack1" data-reactid="1664"><div data-reactid="1665">1</div></a><a href="worst hack2" data-reactid="1666"><div data-reactid="1667">2</div></a><a href="worst hack3" data-reactid="1668"><div data-reactid="1669">3</div></a><a href="worst hack4" data-reactid="1670"><div data-reactid="1671">4</div></a><a href="worst hack5" data-reactid="1672"><div data-reactid="1673">5</div></a></code></pre><div style="width:1px;" data-reactid="1674"></div><pre class="source" data-reactid="1675"><!-- react-text: 1676 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1677"><span class="macro clojure-core" data-reactid="1678">defn</span></a><!-- react-text: 1679 --> <!-- /react-text --><!-- react-text: 1680 -->example<!-- /react-text --><!-- react-text: 1681 -->
  [<!-- /react-text --><!-- react-text: 1682 -->x<!-- /react-text --><!-- react-text: 1683 -->]
  (<!-- /react-text --><span class="added" data-reactid="1684">-&gt;</span><!-- react-text: 1685 --> {<!-- /react-text --><span class="keyword" data-reactid="1686">:more</span><!-- react-text: 1687 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1688"><span class="clojure-core" data-reactid="1689">inc</span></a><!-- react-text: 1690 --> <!-- /react-text --><!-- react-text: 1691 -->x<!-- /react-text --><!-- react-text: 1692 -->)
       <!-- /react-text --><span class="keyword" data-reactid="1693">:less</span><!-- react-text: 1694 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1695"><span class="clojure-core" data-reactid="1696">dec</span></a><!-- react-text: 1697 --> <!-- /react-text --><!-- react-text: 1698 -->x<!-- /react-text --><!-- react-text: 1699 -->)}
      <!-- /react-text --><span class="added" data-reactid="1700"><span data-reactid="1701"><!-- react-text: 1702 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1703"><span class="clojure-core" data-reactid="1704">assoc</span></a><!-- react-text: 1705 --> <!-- /react-text --><span class="keyword" data-reactid="1706">:twice</span><!-- react-text: 1707 --> <!-- /react-text --><span data-reactid="1708"><!-- react-text: 1709 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1710"><span class="clojure-core" data-reactid="1711">+</span></a><!-- react-text: 1712 --> <!-- /react-text --><!-- react-text: 1713 -->x<!-- /react-text --><!-- react-text: 1714 --> <!-- /react-text --><!-- react-text: 1715 -->x<!-- /react-text --><!-- react-text: 1716 -->)<!-- /react-text --></span><!-- react-text: 1717 -->)<!-- /react-text --></span></span><!-- react-text: 1718 -->))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1719"></div></div><div class="caption" data-reactid="1720"><!-- react-text: 1721 -->Now we have the completed diff, and we have (nil S) and (nil T), <!-- /react-text --><!-- react-text: 1722 -->so all we need to do is pop out of the defn body and we&#x27;re done!<!-- /react-text --></div><div style="margin-bottom:20px;" class="insetcontainer" data-reactid="1723"><div style="min-width:fit-content;min-width:-moz-fit-content;" class="inset" data-reactid="1724"><div id="168774556" data-reactid="1725"><div class="filename-heading" data-reactid="1726"><span data-reactid="1727"><!-- react-text: 1728 -->#88 goal! (popped best) -1,+2 cost 82/36 remain 45/46 (nil S) (nil T)<!-- /react-text --><span data-reactid="1729"><!-- react-text: 1730 --> (<!-- /react-text --><!-- react-text: 1731 -->a0f4b9c<!-- /react-text --><!-- react-text: 1732 --> from <!-- /react-text --><a href="#1937324481" data-reactid="1733">737939c1</a><!-- react-text: 1734 -->)<!-- /react-text --></span></span></div><div style="display:flex;flex-direction:row;" data-reactid="1735"><div class="diffpane" data-reactid="1736"><div class="code-card" data-reactid="1737"><div class="code-card-heading" data-reactid="1738"><div class="code-card-heading-extra" data-reactid="1739"></div></div><div class="container" data-reactid="1740"><pre class="gutter" data-reactid="1741"><code class="punctuation" data-reactid="1742"><a href="the absolute1" data-reactid="1743"><div data-reactid="1744">1</div></a><a href="the absolute2" data-reactid="1745"><div data-reactid="1746">2</div></a><a href="the absolute3" data-reactid="1747"><div data-reactid="1748">3</div></a><a href="the absolute4" data-reactid="1749"><div data-reactid="1750">4</div></a><a href="the absolute5" data-reactid="1751"><div data-reactid="1752">5</div></a></code></pre><div style="width:1px;" data-reactid="1753"></div><pre class="source" data-reactid="1754"><!-- react-text: 1755 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1756"><span class="macro clojure-core" data-reactid="1757">defn</span></a><!-- react-text: 1758 --> <!-- /react-text --><!-- react-text: 1759 -->example<!-- /react-text --><!-- react-text: 1760 -->
  [<!-- /react-text --><!-- react-text: 1761 -->x<!-- /react-text --><!-- react-text: 1762 -->]
  <!-- /react-text --><span class="deleted" data-reactid="1763"><span data-reactid="1764"><!-- react-text: 1765 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/println" data-reactid="1766"><span class="clojure-core" data-reactid="1767">println</span></a><!-- react-text: 1768 --> <!-- /react-text --><span class="string" data-reactid="1769">&quot;hello!&quot;</span><!-- react-text: 1770 -->)<!-- /react-text --></span></span><!-- react-text: 1771 -->
  {<!-- /react-text --><span class="keyword" data-reactid="1772">:more</span><!-- react-text: 1773 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1774"><span class="clojure-core" data-reactid="1775">inc</span></a><!-- react-text: 1776 --> <!-- /react-text --><!-- react-text: 1777 -->x<!-- /react-text --><!-- react-text: 1778 -->)
   <!-- /react-text --><span class="keyword" data-reactid="1779">:less</span><!-- react-text: 1780 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1781"><span class="clojure-core" data-reactid="1782">dec</span></a><!-- react-text: 1783 --> <!-- /react-text --><!-- react-text: 1784 -->x<!-- /react-text --><!-- react-text: 1785 -->)})<!-- /react-text --></pre></div></div></div><div class="diffpane" data-reactid="1786"><div class="code-card" data-reactid="1787"><div class="code-card-heading" data-reactid="1788"><div class="code-card-heading-extra" data-reactid="1789"></div></div><div class="container" data-reactid="1790"><pre class="gutter" data-reactid="1791"><code class="punctuation" data-reactid="1792"><a href="worst hack1" data-reactid="1793"><div data-reactid="1794">1</div></a><a href="worst hack2" data-reactid="1795"><div data-reactid="1796">2</div></a><a href="worst hack3" data-reactid="1797"><div data-reactid="1798">3</div></a><a href="worst hack4" data-reactid="1799"><div data-reactid="1800">4</div></a><a href="worst hack5" data-reactid="1801"><div data-reactid="1802">5</div></a></code></pre><div style="width:1px;" data-reactid="1803"></div><pre class="source" data-reactid="1804"><!-- react-text: 1805 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/defn" data-reactid="1806"><span class="macro clojure-core" data-reactid="1807">defn</span></a><!-- react-text: 1808 --> <!-- /react-text --><!-- react-text: 1809 -->example<!-- /react-text --><!-- react-text: 1810 -->
  [<!-- /react-text --><!-- react-text: 1811 -->x<!-- /react-text --><!-- react-text: 1812 -->]
  (<!-- /react-text --><span class="added" data-reactid="1813">-&gt;</span><!-- react-text: 1814 --> {<!-- /react-text --><span class="keyword" data-reactid="1815">:more</span><!-- react-text: 1816 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/inc" data-reactid="1817"><span class="clojure-core" data-reactid="1818">inc</span></a><!-- react-text: 1819 --> <!-- /react-text --><!-- react-text: 1820 -->x<!-- /react-text --><!-- react-text: 1821 -->)
       <!-- /react-text --><span class="keyword" data-reactid="1822">:less</span><!-- react-text: 1823 --> (<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/dec" data-reactid="1824"><span class="clojure-core" data-reactid="1825">dec</span></a><!-- react-text: 1826 --> <!-- /react-text --><!-- react-text: 1827 -->x<!-- /react-text --><!-- react-text: 1828 -->)}
      <!-- /react-text --><span class="added" data-reactid="1829"><span data-reactid="1830"><!-- react-text: 1831 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/assoc" data-reactid="1832"><span class="clojure-core" data-reactid="1833">assoc</span></a><!-- react-text: 1834 --> <!-- /react-text --><span class="keyword" data-reactid="1835">:twice</span><!-- react-text: 1836 --> <!-- /react-text --><span data-reactid="1837"><!-- react-text: 1838 -->(<!-- /react-text --><a href="https://clojuredocs.org/clojure.core/+" data-reactid="1839"><span class="clojure-core" data-reactid="1840">+</span></a><!-- react-text: 1841 --> <!-- /react-text --><!-- react-text: 1842 -->x<!-- /react-text --><!-- react-text: 1843 --> <!-- /react-text --><!-- react-text: 1844 -->x<!-- /react-text --><!-- react-text: 1845 -->)<!-- /react-text --></span><!-- react-text: 1846 -->)<!-- /react-text --></span></span><!-- react-text: 1847 -->))<!-- /react-text --></pre></div></div></div></div></div></div><div style="width:100%;" data-reactid="1848"></div></div></div></p></div></div></body></html>